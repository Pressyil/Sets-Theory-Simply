<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Sets Theory - Interactive Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #17a2b8;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 320px;
            background-color: var(--primary);
            color: white;
            padding: 20px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            box-shadow: var(--shadow);
            z-index: 100;
        }

        .sidebar-header {
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .section-list {
            list-style: none;
            max-height: 70vh;
            overflow-y: auto;
        }

        .section-list li {
            margin-bottom: 8px;
        }

        .section-list a {
            display: flex;
            align-items: center;
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .section-list a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .section-list a.active {
            background-color: var(--secondary);
            font-weight: bold;
        }

        .section-list i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 320px;
            padding: 30px;
            max-width: calc(100% - 320px);
        }

        .section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 15px;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header h2 {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
        }

        .section-header h2 i {
            margin-right: 10px;
            color: var(--secondary);
        }

        /* Content Styling */
        .content-block {
            margin-bottom: 30px;
        }

        h3 {
            color: var(--primary);
            margin: 20px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 1px dashed #ddd;
        }

        p {
            margin-bottom: 15px;
        }

        .math {
            font-size: 1.1rem;
            margin: 15px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary);
            border-radius: 0 5px 5px 0;
            overflow-x: auto;
        }

        .example {
            background-color: #f0f7ff;
            border-left: 4px solid var(--secondary);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }

        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .example-title {
            font-weight: bold;
            color: var(--secondary);
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .example-title i {
            margin-right: 8px;
        }

        .example-toggle {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .example-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .example-content.collapsed {
            max-height: 0;
        }

        .exercise {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            padding: 20px;
            margin: 25px 0;
            border-radius: 5px;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .exercise-title {
            font-weight: bold;
            color: var(--accent);
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .exercise-title i {
            margin-right: 8px;
        }

        .exercise-toggle {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .exercise-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .exercise-content.collapsed {
            max-height: 0;
        }

        .definition {
            background-color: #fff8e1;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }

        .definition-title {
            font-weight: bold;
            color: var(--warning);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .definition-title i {
            margin-right: 8px;
        }

        .fact {
            background-color: #e8f5e9;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }

        .fact-title {
            font-weight: bold;
            color: var(--success);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .fact-title i {
            margin-right: 8px;
        }

        /* Interactive Elements */
        .interactive-box {
            background-color: #f5f7fa;
            border: 1px solid #e1e5eb;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }

        .interactive-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .interactive-title {
            font-weight: bold;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .interactive-title i {
            margin-right: 10px;
            color: var(--secondary);
        }

        .interactive-toggle {
            background-color: var(--info);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .interactive-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .interactive-content.collapsed {
            max-height: 0;
        }

        /* Graph Containers */
        .graph-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
        }

        .venn-container, .cartesian-container, .numberline-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            position: relative;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .control-btn {
            padding: 8px 15px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .control-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .control-btn.accent {
            background-color: var(--accent);
        }

        .control-btn.accent:hover {
            background-color: #c0392b;
        }

        /* Exercise Submission */
        .submission-area {
            margin-top: 20px;
            padding: 15px;
            border: 1px dashed #ddd;
            border-radius: 5px;
            background-color: #fafafa;
        }

        .submission-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .submission-title i {
            margin-right: 8px;
            color: var(--secondary);
        }

        .answer-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
            font-size: 1rem;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 80px;
        }

        .file-upload {
            width: 100%;
            padding: 10px;
            border: 1px dashed #ddd;
            border-radius: 4px;
            text-align: center;
            margin-bottom: 10px;
            cursor: pointer;
            background-color: white;
        }

        .file-upload:hover {
            background-color: #f9f9f9;
        }

        .submit-btn {
            padding: 10px 20px;
            background-color: var(--success);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
        }

        .submit-btn:hover {
            background-color: #229954;
            transform: translateY(-2px);
        }

        .submission-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }

        .submission-feedback.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .submission-feedback.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
            color: var(--primary);
            font-weight: 600;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        /* Footer Navigation */
        .section-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .nav-btn {
            padding: 10px 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .nav-btn:hover {
            background-color: #1a252f;
            transform: translateY(-2px);
        }

        .nav-btn i {
            margin: 0 8px;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 280px;
            }
            
            .main-content {
                margin-left: 280px;
                max-width: calc(100% - 280px);
            }
        }

        @media (max-width: 992px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                margin-bottom: 20px;
            }
            
            .main-content {
                margin-left: 0;
                max-width: 100%;
            }
            
            .section-list {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                max-height: none;
            }
            
            .section-list li {
                margin-bottom: 0;
            }
            
            .section-list a {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 15px;
            }
            
            .section {
                padding: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .control-btn {
                width: 100%;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .section-header h2 {
                margin-bottom: 10px;
            }
        }

        /* Highlighting for important elements */
        .highlight {
            background-color: #fffacd;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: 500;
        }

        .set-notation {
            font-family: 'Courier New', monospace;
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .cardinality {
            color: var(--accent);
            font-weight: bold;
        }

        /* Tab Interface for Exercises */
        .exercise-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .exercise-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            margin-bottom: -1px;
            transition: var(--transition);
        }

        .exercise-tab:hover {
            background-color: #f5f5f5;
        }

        .exercise-tab.active {
            border-color: #ddd;
            border-bottom-color: white;
            background-color: white;
            font-weight: bold;
            color: var(--secondary);
        }

        .exercise-tab-content {
            display: none;
        }

        .exercise-tab-content.active {
            display: block;
        }

        /* Progress Bar */
        .progress-bar {
            height: 5px;
            background-color: #eee;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-project-diagram"></i> Complete Sets Theory</h1>
                <p>Interactive Learning Platform, Realised by Pr. Iliass ESSAYOUDY for My students Group R4</p>
                <p>Based on MIT Courses</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress"></div>
                </div>
                <p id="progress-text">Progress: 0%</p>
            </div>
            <ul class="section-list">
                <li><a href="#intro" class="active"><i class="fas fa-home"></i> Introduction</a></li>
                <li><a href="#1.1"><i class="fas fa-list"></i>  Introduction to Sets</a></li>
                <li><a href="#1.2"><i class="fas fa-times"></i>  Cartesian Product</a></li>
                <li><a href="#1.3"><i class="fas fa-subscript"></i>  Subsets</a></li>
                <li><a href="#1.4"><i class="fas fa-bolt"></i>  Power Sets</a></li>
                <li><a href="#1.5"><i class="fas fa-university"></i>  Union, Intersection, Difference</a></li>
                <li><a href="#1.6"><i class="fas fa-complement"></i>  Complement</a></li>
                <li><a href="#1.7"><i class="fas fa-draw-polygon"></i>  Venn Diagrams</a></li>
                <li><a href="#1.8"><i class="fas fa-list-ol"></i>  Indexed Sets</a></li>
                <li><a href="#1.9"><i class="fas fa-calculator"></i>  Number Systems</a></li>
                <li><a href="#1.10"><i class="fas fa-exclamation-triangle"></i> 1.10 Russell's Paradox</a></li>
                <li><a href="#exercises"><i class="fas fa-tasks"></i> All Exercises</a></li>
                <li><a href="#submissions"><i class="fas fa-upload"></i> My Submissions</a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Introduction Section -->
            <section id="intro" class="section active">
                <div class="section-header">
                    <h2><i class="fas fa-home"></i> Introduction to Sets Theory</h2>
                    <button class="control-btn" onclick="toggleAllExamples()">
                        <i class="fas fa-expand"></i> Expand All Examples
                    </button>
                </div>
                <div class="content-block">
                    <p>Welcome to the complete interactive learning platform for <span class="highlight">Sets Theory</span>. with dynamic explanations, interactive graphics, animations, and a complete exercise system.</p>
                    
                    <div class="interactive-box">
                        <div class="interactive-header">
                            <div class="interactive-title">
                                <i class="fas fa-lightbulb"></i> Why Study Sets?
                            </div>
                            <button class="interactive-toggle" onclick="toggleInteractive(this)">
                                Show Content
                            </button>
                        </div>
                        <div class="interactive-content">
                            <p>Sets form the foundation of all mathematics. As you progress in your mathematical studies, you'll see that sets provide a precise language for describing mathematical structures of all kinds.</p>
                            
                            <div class="controls">
                                <button class="control-btn" onclick="showSetExample()">
                                    <i class="fas fa-eye"></i> Show Set Example
                                </button>
                                <button class="control-btn" onclick="animateCardinality()">
                                    <i class="fas fa-play"></i> Animate Cardinality
                                </button>
                                <button class="control-btn" onclick="resetIntro()">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                            
                            <div id="intro-demo" style="padding: 15px; border: 1px dashed #ccc; border-radius: 5px; margin-top: 15px; min-height: 100px;">
                                <p>Click the buttons above to see interactive examples.</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>How to Use This Platform</h3>
                    <p>This website is designed to help you understand sets theory through:</p>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li><strong>Interactive examples</strong> that you can manipulate</li>
                        <li><strong>Dynamic visualizations</strong> of set operations with graphs, planes, and lines</li>
                        <li><strong>Complete examples</strong> from the textbook with step-by-step explanations</li>
                        <li><strong>All exercises</strong> with submission and feedback system</li>
                        <li><strong>Progress tracking</strong> to monitor your learning</li>
                    </ul>
                    
                    <div class="fact">
                        <div class="fact-title">
                            <i class="fas fa-check-circle"></i> Platform Features
                        </div>
                        <ul>
                            <li>Click on any example header to expand/collapse it</li>
                            <li>Use interactive controls to visualize concepts</li>
                            <li>Submit answers to exercises and get feedback</li>
                            <li>Track your progress through the material</li>
                            <li>View all your submissions in one place</li>
                        </ul>
                    </div>
                </div>
                
                <div class="section-nav">
                    <div></div>
                    <button class="nav-btn" onclick="showSection('1.1')">
                        Next: Introduction to Sets <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.1: Introduction to Sets -->
            <section id="1.1" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> 1.1 Introduction to Sets</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.1')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <p>A <span class="highlight">set</span> is a collection of things, called <span class="highlight">elements</span> or <span class="highlight">members</span>. Sets are usually denoted by capital letters, and their elements are listed between curly braces.</p>
                    
                    <div class="math">
                        \( A = \{2, 4, 6, 8\} \)
                    </div>
                    
                    <p>The set \(A\) has four elements: 2, 4, 6, and 8. We write \(2 \in A\) to mean "2 is an element of A" and \(5 \notin A\) to mean "5 is not an element of A".</p>
                    
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Set Equality
                        </div>
                        <p>Two sets are equal if they contain exactly the same elements. Order does not matter.</p>
                        <div class="math">
                            \(\{2, 4, 6, 8\} = \{4, 2, 8, 6\}\)
                        </div>
                        <div class="math">
                            \(\{2, 4, 6, 8\} \neq \{2, 4, 6, 7\}\)
                        </div>
                    </div>
                    
                    <!-- Example 1.1 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.1 - Set-Builder Notation
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Here are some illustrations of set-builder notation:</p>
                            <ol style="margin-left: 20px; margin-bottom: 15px;">
                                <li>\(\{n : n \text{ is a prime number}\} = \{2, 3, 5, 7, 11, 13, 17, \ldots\}\)</li>
                                <li>\(\{n \in N : n \text{ is prime}\} = \{2, 3, 5, 7, 11, 13, 17, \ldots\}\)</li>
                                <li>\(\{n^2 : n \in Z\} = \{0, 1, 4, 9, 16, 25, \ldots\}\)</li>
                                <li>\(\{x \in R : x^2 - 2 = 0\} = \{\sqrt{2}, -\sqrt{2}\}\)</li>
                                <li>\(\{x \in Z : x^2 - 2 = 0\} = \emptyset\)</li>
                                <li>\(\{x \in Z : |x| < 4\} = \{-3, -2, -1, 0, 1, 2, 3\}\)</li>
                                <li>\(\{2x : x \in Z, |x| < 4\} = \{-6, -4, -2, 0, 2, 4, 6\}\)</li>
                                <li>\(\{x \in Z : |2x| < 4\} = \{-1, 0, 1\}\)</li>
                            </ol>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-sliders-h"></i> Set Builder Notation Interactive
                                </div>
                                <p>Explore set-builder notation with different rules:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showSetBuilderExample(1)">
                                        Even Integers
                                    </button>
                                    <button class="control-btn" onclick="showSetBuilderExample(2)">
                                        Squares
                                    </button>
                                    <button class="control-btn" onclick="showSetBuilderExample(3)">
                                        Primes
                                    </button>
                                </div>
                                
                                <div id="set-builder-demo" class="math" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd;">
                                    \( E = \{2n : n \in \mathbb{Z}\} = \{\ldots, -4, -2, 0, 2, 4, \ldots\} \)
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.2 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.2 - Describe the set \(A = \{7a + 3b : a, b \in Z\}\)
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p><strong>Solution:</strong> This set contains all numbers of form \(7a + 3b\), where \(a\) and \(b\) are integers. Each such number \(7a + 3b\) is an integer, so \(A\) contains only integers. But which integers?</p>
                            
                            <p>If \(n\) is any integer, then \(n = 7n + 3(-2n)\), so \(n = 7a + 3b\) where \(a = n\) and \(b = -2n\). Therefore \(n \in A\).</p>
                            
                            <p>We've now shown that \(A\) contains only integers, and also that every integer is an element of \(A\). Consequently \(A = Z\).</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-calculator"></i> Interactive Check
                                </div>
                                <p>Test the claim that any integer can be expressed as \(7a + 3b\):</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                                        <div>
                                            <label>Enter an integer n: </label>
                                            <input type="number" id="int-n" value="5" style="padding: 5px; width: 80px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="checkIntegerCombination()">
                                        Find a and b
                                    </button>
                                </div>
                                
                                <div id="int-combination-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Click "Find a and b" to see how n can be expressed as 7a + 3b.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Special Sets</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Set</th>
                                <th>Symbol</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Natural Numbers</td>
                                <td>\(\mathbb{N}\)</td>
                                <td>\(\{1, 2, 3, 4, 5, \ldots\}\)</td>
                            </tr>
                            <tr>
                                <td>Integers</td>
                                <td>\(\mathbb{Z}\)</td>
                                <td>\(\{\ldots, -3, -2, -1, 0, 1, 2, 3, \ldots\}\)</td>
                            </tr>
                            <tr>
                                <td>Rational Numbers</td>
                                <td>\(\mathbb{Q}\)</td>
                                <td>\(\{x : x = \frac{m}{n}, \text{ where } m, n \in \mathbb{Z} \text{ and } n \neq 0\}\)</td>
                            </tr>
                            <tr>
                                <td>Real Numbers</td>
                                <td>\(\mathbb{R}\)</td>
                                <td>All numbers on the number line</td>
                            </tr>
                            <tr>
                                <td>Empty Set</td>
                                <td>\(\emptyset\) or \(\{\}\)</td>
                                <td>The set with no elements</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="fact">
                        <div class="fact-title">
                            <i class="fas fa-check-circle"></i> Important Fact
                        </div>
                        <p>The empty set \(\emptyset\) is different from \(\{\emptyset\}\). The first is an empty box, while the second is a box containing an empty box.</p>
                        <div class="math">
                            \(|\emptyset| = 0\) and \(|\{\emptyset\}| = 1\)
                        </div>
                    </div>
                    
                    <!-- Exercises for Section 1.1 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.1
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="exercise-tabs">
                                <div class="exercise-tab active" onclick="switchExerciseTab('1.1', 'A')">Part A</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.1', 'B')">Part B</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.1', 'C')">Part C</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.1', 'D')">Part D</div>
                            </div>
                            
                            <!-- Part A -->
                            <div id="1.1-A" class="exercise-tab-content active">
                                <p><strong>A.</strong> Write each of the following sets by listing their elements between braces.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1A.1: \(\{5x - 1 : x \in \mathbb{Z}\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1A.1')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1A.2: \(\{3x + 2 : x \in \mathbb{Z}\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1A.2')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1A.3: \(\{x \in \mathbb{Z} : -2 \leq x < 7\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1A.3')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part B -->
                            <div id="1.1-B" class="exercise-tab-content">
                                <p><strong>B.</strong> Write each of the following sets in set-builder notation.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1B.17: \(\{2, 4, 8, 16, 32, 64, \ldots\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1B.17')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1B.18: \(\{0, 4, 16, 36, 64, 100, \ldots\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1B.18')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part C -->
                            <div id="1.1-C" class="exercise-tab-content">
                                <p><strong>C.</strong> Find the following cardinalities.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1C.29: \(|\{\{1, \{2, \{3, 4\}\}, \emptyset\}\}|\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1C.29')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1C.30: \(|\{\{1, 4\}, a, b, \{\{3, 4\}\}, \{\emptyset\}\}|\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.1C.30')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part D -->
                            <div id="1.1-D" class="exercise-tab-content">
                                <p><strong>D.</strong> Sketch the following sets of points in the \(x-y\) plane.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1D.39: \(\{(x, y) : x \in [1, 2], y \in [1, 2]\}\)
                                    </div>
                                    <p>Sketch this set on the coordinate plane:</p>
                                    <div class="graph-container" id="graph-1-1-39"></div>
                                    <div class="controls">
                                        <button class="control-btn" onclick="drawExercise139()">
                                            <i class="fas fa-draw-polygon"></i> Draw Set
                                        </button>
                                        <button class="control-btn" onclick="clearGraph('graph-1-1-39')">
                                            <i class="fas fa-eraser"></i> Clear
                                        </button>
                                    </div>
                                    <p>Describe your sketch or upload an image:</p>
                                    <textarea class="answer-input" placeholder="Describe your sketch..."></textarea>
                                    <div class="file-upload" onclick="document.getElementById('file-1-1-39').click()">
                                        <i class="fas fa-upload"></i> Click to upload sketch image
                                        <input type="file" id="file-1-1-39" style="display: none;" accept="image/*">
                                    </div>
                                    <button class="submit-btn" onclick="submitExercise('1.1D.39')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.1D.40: \(\{(x, y) : x \in [0, 1], y \in [1, 2]\}\)
                                    </div>
                                    <p>Sketch this set on the coordinate plane:</p>
                                    <div class="graph-container" id="graph-1-1-40"></div>
                                    <div class="controls">
                                        <button class="control-btn" onclick="drawExercise140()">
                                            <i class="fas fa-draw-polygon"></i> Draw Set
                                        </button>
                                        <button class="control-btn" onclick="clearGraph('graph-1-1-40')">
                                            <i class="fas fa-eraser"></i> Clear
                                        </button>
                                    </div>
                                    <textarea class="answer-input" placeholder="Describe your sketch..."></textarea>
                                    <div class="file-upload" onclick="document.getElementById('file-1-1-40').click()">
                                        <i class="fas fa-upload"></i> Click to upload sketch image
                                        <input type="file" id="file-1-1-40" style="display: none;" accept="image/*">
                                    </div>
                                    <button class="submit-btn" onclick="submitExercise('1.1D.40')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('intro')">
                        <i class="fas fa-arrow-left"></i> Previous: Introduction
                    </button>
                    <button class="nav-btn" onclick="showSection('1.2')">
                        Next: Cartesian Product <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.2: Cartesian Product -->
            <section id="1.2" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-times"></i> 1.2 The Cartesian Product</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.2')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Ordered Pair
                        </div>
                        <p>An <span class="highlight">ordered pair</span> is a list \((x, y)\) of two things \(x\) and \(y\), enclosed in parentheses and separated by a comma. The order matters: \((2, 4) \neq (4, 2)\).</p>
                    </div>
                    
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Cartesian Product
                        </div>
                        <p>The <span class="highlight">Cartesian product</span> of two sets \(A\) and \(B\) is another set, denoted \(A \times B\), and defined as:</p>
                        <div class="math">
                            \( A \times B = \{(a, b) : a \in A, b \in B\} \)
                        </div>
                    </div>
                    
                    <!-- Example from text -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Visualizing Cartesian Products
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>The set \( \mathbb{R} \times \mathbb{R} = \{(x, y) : x, y \in \mathbb{R}\} \) is the familiar Cartesian plane.</p>
                            
                            <p>The set \( \mathbb{R} \times \mathbb{N} = \{(x, y) : x \in \mathbb{R}, y \in \mathbb{N}\} \) can be regarded as all of the points on the plane whose second coordinate is a natural number. This looks like infinitely many horizontal lines at integer heights above the \(x\)-axis.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-border-all"></i> Cartesian Product Visualizer
                                </div>
                                <p>Visualize different Cartesian products:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="drawCartesianPlane()">
                                        <i class="fas fa-globe"></i> ℝ × ℝ
                                    </button>
                                    <button class="control-btn" onclick="drawRNatural()">
                                        <i class="fas fa-horizontal-rule"></i> ℝ × ℕ
                                    </button>
                                    <button class="control-btn" onclick="drawNNatural()">
                                        <i class="fas fa-th"></i> ℕ × ℕ
                                    </button>
                                </div>
                                
                                <div class="graph-container" id="cartesian-graph"></div>
                            </div>
                            
                            <p>The set \( \mathbb{N} \times \mathbb{N} \) is the set of all points on the plane whose coordinates are both natural numbers. It looks like a grid of dots in the first quadrant.</p>
                        </div>
                    </div>
                    
                    <!-- Example 1.4 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.4 - Coin Toss Outcomes
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Represent the two sides of a coin by the set \( S = \{ H, T \} \). The possible outcomes of tossing the coin seven times in a row can be described with the Cartesian power \( S^7 \).</p>
                            
                            <p>A typical element of \( S^7 \) looks like \((H, H, T, H, T, T, T)\), meaning a head was tossed first, then another head, then a tail, then a head followed by three tails.</p>
                            
                            <p>Note that \( |S^7| = 2^7 = 128 \), so there are 128 possible outcomes.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-coins"></i> Coin Toss Simulator
                                </div>
                                <p>Simulate coin tosses and see the outcomes as elements of \( S^n \):</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                                        <div>
                                            <label>Number of tosses (n): </label>
                                            <input type="number" id="num-tosses" value="3" min="1" max="10" style="padding: 5px; width: 80px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="simulateCoinTosses()">
                                        <i class="fas fa-dice"></i> Simulate Tosses
                                    </button>
                                    <button class="control-btn" onclick="calculatePossibleOutcomes()">
                                        <i class="fas fa-calculator"></i> Calculate Total Outcomes
                                    </button>
                                </div>
                                
                                <div id="coin-toss-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Click "Simulate Tosses" to see a random outcome.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Cartesian Powers and Higher Dimensions</h3>
                    <p>For any set \(A\) and positive integer \(n\), the <span class="highlight">Cartesian power</span> \(A^n\) is:</p>
                    <div class="math">
                        \( A^n = A \times A \times \cdots \times A = \{(x_1, x_2, \ldots, x_n) : x_1, x_2, \ldots, x_n \in A\} \)
                    </div>
                    
                    <p>Thus, \(\mathbb{R}^2\) is the familiar Cartesian plane and \(\mathbb{R}^3\) is three-dimensional space.</p>
                    
                    <div class="interactive-box">
                        <div class="interactive-title">
                            <i class="fas fa-cube"></i> 3D Cartesian Space Visualization
                        </div>
                        <p>Explore \(\mathbb{R}^3\) and \(\mathbb{Z}^3\):</p>
                        
                        <div class="controls">
                            <button class="control-btn" onclick="showR3Space()">
                                <i class="fas fa-cube"></i> Show ℝ³
                            </button>
                            <button class="control-btn" onclick="showZ3Grid()">
                                <i class="fas fa-th-large"></i> Show ℤ³ Grid
                            </button>
                            <button class="control-btn" onclick="showPointInR3()">
                                <i class="fas fa-dot-circle"></i> Show Point in ℝ³
                            </button>
                        </div>
                        
                        <div class="graph-container" id="3d-graph"></div>
                    </div>
                    
                    <!-- Exercises for Section 1.2 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.2
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="exercise-tabs">
                                <div class="exercise-tab active" onclick="switchExerciseTab('1.2', 'A')">Part A</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.2', 'B')">Part B</div>
                            </div>
                            
                            <!-- Part A -->
                            <div id="1.2-A" class="exercise-tab-content active">
                                <p><strong>A.</strong> Write out the indicated sets by listing their elements between braces.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.2A.1: Suppose \(A = \{1, 2, 3, 4\}\) and \(B = \{a, c\}\)
                                    </div>
                                    <p>Find:</p>
                                    <ul>
                                        <li>(a) \(A \times B\)</li>
                                        <li>(b) \(B \times A\)</li>
                                        <li>(c) \(A \times A\)</li>
                                        <li>(d) \(B \times B\)</li>
                                    </ul>
                                    <textarea class="answer-input" placeholder="Enter your answers here..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.2A.1')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part B -->
                            <div id="1.2-B" class="exercise-tab-content">
                                <p><strong>B.</strong> Sketch these Cartesian products on the \(x-y\) plane \(\mathbb{R}^2\) (or \(\mathbb{R}^3\) for the last two).</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.2B.9: \(\{1, 2, 3\} \times \{-1, 0, 1\}\)
                                    </div>
                                    <p>Sketch this Cartesian product:</p>
                                    <div class="graph-container" id="graph-1-2-9"></div>
                                    <div class="controls">
                                        <button class="control-btn" onclick="drawExercise129()">
                                            <i class="fas fa-draw-polygon"></i> Draw Points
                                        </button>
                                        <button class="control-btn" onclick="clearGraph('graph-1-2-9')">
                                            <i class="fas fa-eraser"></i> Clear
                                        </button>
                                    </div>
                                    <textarea class="answer-input" placeholder="Describe your sketch..."></textarea>
                                    <div class="file-upload" onclick="document.getElementById('file-1-2-9').click()">
                                        <i class="fas fa-upload"></i> Click to upload sketch image
                                        <input type="file" id="file-1-2-9" style="display: none;" accept="image/*">
                                    </div>
                                    <button class="submit-btn" onclick="submitExercise('1.2B.9')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.1')">
                        <i class="fas fa-arrow-left"></i> Previous: Introduction to Sets
                    </button>
                    <button class="nav-btn" onclick="showSection('1.3')">
                        Next: Subsets <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.3: Subsets -->
            <section id="1.3" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-subscript"></i> 1.3 Subsets</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.3')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Subset
                        </div>
                        <p>Suppose \(A\) and \(B\) are sets. If every element of \(A\) is also an element of \(B\), then we say \(A\) is a <span class="highlight">subset</span> of \(B\), and we write \(A \subseteq B\).</p>
                        <p>If \(A\) is not a subset of \(B\), we write \(A \not\subseteq B\).</p>
                    </div>
                    
                    <!-- Example 1.5 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.5 - Subset Examples
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Be sure you understand why each of the following is true:</p>
                            <ol style="margin-left: 20px; margin-bottom: 15px;">
                                <li>\(\{2, 3, 7\} \subseteq \{2, 3, 4, 5, 6, 7\}\)</li>
                                <li>\(\{2, 3, 7\} \not\subseteq \{2, 4, 5, 6, 7\}\)</li>
                                <li>\(\{2, 3, 7\} \subseteq \{2, 3, 7\}\)</li>
                                <li>\(\{(x, \sin(x)) : x \in \mathbb{R}\} \subseteq \mathbb{R}^2\)</li>
                                <li>\(\{1, 3, 5, 7, 11, 13, 17, \ldots\} \subseteq \mathbb{N}\)</li>
                                <li>\(\mathbb{N} \subseteq \mathbb{Z} \subseteq \mathbb{Q} \subseteq \mathbb{R}\)</li>
                                <li>\(\mathbb{R} \times \mathbb{N} \subseteq \mathbb{R} \times \mathbb{R}\)</li>
                                <li>\(A \subseteq A\) for any set \(A\)</li>
                                <li>\(\emptyset \subseteq \emptyset\)</li>
                            </ol>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-check-double"></i> Subset Checker
                                </div>
                                <p>Check if one set is a subset of another:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>Set A: </label>
                                            <input type="text" id="subsetAInput" value="{2, 4, 6}" style="padding: 5px; width: 120px;">
                                        </div>
                                        <div>
                                            <label>Set B: </label>
                                            <input type="text" id="subsetBInput" value="{1, 2, 3, 4, 5, 6}" style="padding: 5px; width: 150px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="checkSubset()">
                                        <i class="fas fa-check"></i> Check if A ⊆ B
                                    </button>
                                    <button class="control-btn" onclick="checkProperSubset()">
                                        <i class="fas fa-check-double"></i> Check if A ⊂ B (Proper)
                                    </button>
                                </div>
                                
                                <div id="subset-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter sets and click check to see the subset relationship.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.6 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.6 - More Subset Examples
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Be sure you understand why the following statements are true. Each illustrates an aspect of set theory:</p>
                            
                            <div style="column-count: 2; column-gap: 30px; margin: 15px 0;">
                                <ol style="margin-left: 20px;">
                                    <li>\(1 \in \{1, \{1\}\}\)</li>
                                    <li>\(1 \not\subseteq \{1, \{1\}\}\)</li>
                                    <li>\(\{1\} \in \{1, \{1\}\}\)</li>
                                    <li>\(\{1\} \subseteq \{1, \{1\}\}\)</li>
                                    <li>\(\{\{1\}\} \not\in \{1, \{1\}\}\)</li>
                                    <li>\(\{\{1\}\} \subseteq \{1, \{1\}\}\)</li>
                                    <li>\(\mathbb{N} \not\in \mathbb{N}\)</li>
                                    <li>\(\mathbb{N} \subseteq \mathbb{N}\)</li>
                                    <li>\(\emptyset \not\in \mathbb{N}\)</li>
                                    <li>\(\emptyset \subseteq \mathbb{N}\)</li>
                                </ol>
                                <ol start="11" style="margin-left: 20px;">
                                    <li>\(\mathbb{N} \not\in \{\mathbb{N}\}\)</li>
                                    <li>\(\mathbb{N} \not\subseteq \{\mathbb{N}\}\)</li>
                                    <li>\(\emptyset \not\in \{\mathbb{N}\}\)</li>
                                    <li>\(\emptyset \subseteq \{\mathbb{N}\}\)</li>
                                    <li>\(\emptyset \in \{\emptyset, \mathbb{N}\}\)</li>
                                    <li>\(\emptyset \subseteq \{\emptyset, \mathbb{N}\}\)</li>
                                    <li>\(\{\mathbb{N}\} \subseteq \{\emptyset, \mathbb{N}\}\)</li>
                                    <li>\(\{\mathbb{N}\} \not\in \{\emptyset, \{\mathbb{N}\}\}\}\)</li>
                                    <li>\(\{\mathbb{N}\} \in \{\emptyset, \{\mathbb{N}\}\}\)</li>
                                    <li>\(\{(1, 2), (2, 2), (7, 1)\} \subseteq \mathbb{N} \times \mathbb{N}\)</li>
                                </ol>
                            </div>
                            
                            <div class="fact">
                                <div class="fact-title">
                                    <i class="fas fa-check-circle"></i> Important Fact
                                </div>
                                <p>The empty set is a subset of all sets, that is, \(\emptyset \subseteq B\) for any set \(B\).</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Listing All Subsets</h3>
                    <p>For a set with \(n\) elements, there are \(2^n\) possible subsets (including the empty set and the set itself).</p>
                    
                    <div class="interactive-box">
                        <div class="interactive-title">
                            <i class="fas fa-list-ol"></i> Subset Generator
                        </div>
                        <p>Enter a set to see all its subsets:</p>
                        
                        <div class="controls">
                            <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                <div>
                                    <label>Set: </label>
                                    <input type="text" id="subsetGenInput" value="{a, b, c}" style="padding: 5px; width: 120px;">
                                </div>
                            </div>
                            <button class="control-btn" onclick="generateSubsets()">
                                <i class="fas fa-cogs"></i> Generate Subsets
                            </button>
                        </div>
                        
                        <div id="subset-list" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                            <p>Enter a set and click generate to see all its subsets.</p>
                        </div>
                    </div>
                    
                    <!-- Exercises for Section 1.3 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.3
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="exercise-tabs">
                                <div class="exercise-tab active" onclick="switchExerciseTab('1.3', 'A')">Part A</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.3', 'B')">Part B</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.3', 'C')">Part C</div>
                            </div>
                            
                            <!-- Part A -->
                            <div id="1.3-A" class="exercise-tab-content active">
                                <p><strong>A.</strong> List all the subsets of the following sets.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.3A.1: \(\{1, 2, 3, 4\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter all subsets..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.3A.1')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part B -->
                            <div id="1.3-B" class="exercise-tab-content">
                                <p><strong>B.</strong> Write out the following sets by listing their elements between braces.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.3B.9: \(\{X : X \subseteq \{3, 2, a\} \text{ and } |X| = 2\}\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter your answer..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.3B.9')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part C -->
                            <div id="1.3-C" class="exercise-tab-content">
                                <p><strong>C.</strong> Decide if the following statements are true or false. Explain.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.3C.13: \(\mathbb{R}^3 \subseteq \mathbb{R}^3\)
                                    </div>
                                    <div style="margin-bottom: 10px;">
                                        <label>
                                            <input type="radio" name="1.3C.13" value="true"> True
                                        </label>
                                        <label style="margin-left: 15px;">
                                            <input type="radio" name="1.3C.13" value="false"> False
                                        </label>
                                    </div>
                                    <textarea class="answer-input" placeholder="Explain your answer..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.3C.13')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.2')">
                        <i class="fas fa-arrow-left"></i> Previous: Cartesian Product
                    </button>
                    <button class="nav-btn" onclick="showSection('1.4')">
                        Next: Power Sets <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.4: Power Sets -->
            <section id="1.4" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-bolt"></i> 1.4 Power Sets</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.4')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Power Set
                        </div>
                        <p>If \(A\) is a set, the <span class="highlight">power set</span> of \(A\) is another set, denoted \(\mathcal{P}(A)\), defined to be the set of all subsets of \(A\):</p>
                        <div class="math">
                            \( \mathcal{P}(A) = \{X : X \subseteq A\} \)
                        </div>
                    </div>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Power Set of \(\{1, 2, 3\}\)
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>If \(A = \{1, 2, 3\}\), then:</p>
                            <div class="math">
                                \( \mathcal{P}(A) = \{\emptyset, \{1\}, \{2\}, \{3\}, \{1, 2\}, \{1, 3\}, \{2, 3\}, \{1, 2, 3\}\} \)
                            </div>
                            
                            <div class="fact">
                                <div class="fact-title">
                                    <i class="fas fa-check-circle"></i> Fact 1.4
                                </div>
                                <p>If \(A\) is a finite set with \(|A| = n\), then \(|\mathcal{P}(A)| = 2^n\).</p>
                            </div>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-calculator"></i> Power Set Calculator
                                </div>
                                <p>Enter a set to see its power set and verify that it has \(2^n\) elements:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>Set A: </label>
                                            <input type="text" id="powerSetInput" value="{1, 2}" style="padding: 5px; width: 120px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="calculatePowerSet()">
                                        <i class="fas fa-bolt"></i> Calculate Power Set
                                    </button>
                                </div>
                                
                                <div id="power-set-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter a set and click calculate to see its power set.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>The Size of Power Sets</h3>
                    <p>The fact that \(|\mathcal{P}(A)| = 2^{|A|}\) explains the term "power set" - the cardinality of the power set is 2 raised to the power of the cardinality of the original set.</p>
                    
                    <div class="math">
                        \( \text{If } |A| = n, \text{ then } |\mathcal{P}(A)| = 2^n \)
                    </div>
                    
                    <p>This grows very quickly:</p>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li>If \(|A| = 0\), then \(|\mathcal{P}(A)| = 2^0 = 1\) (just the empty set)</li>
                        <li>If \(|A| = 3\), then \(|\mathcal{P}(A)| = 2^3 = 8\)</li>
                        <li>If \(|A| = 10\), then \(|\mathcal{P}(A)| = 2^{10} = 1024\)</li>
                        <li>If \(|A| = 100\), then \(|\mathcal{P}(A)| = 2^{100} \approx 1.27 \times 10^{30}\)</li>
                    </ul>
                    
                    <div class="interactive-box">
                        <div class="interactive-title">
                            <i class="fas fa-chart-line"></i> Power Set Growth Visualization
                        </div>
                        <p>Visualize how quickly the power set grows with set size:</p>
                        
                        <div class="controls">
                            <div style="display: flex; gap: 15px; margin-bottom: 15px; align-items: center;">
                                <div>
                                    <label>Max set size (n): </label>
                                    <input type="range" id="powerSetRange" min="0" max="10" value="5" style="width: 150px;">
                                    <span id="powerSetValue">5</span>
                                </div>
                            </div>
                            <button class="control-btn" onclick="plotPowerSetGrowth()">
                                <i class="fas fa-chart-bar"></i> Plot Growth
                            </button>
                        </div>
                        
                        <div class="graph-container" id="power-set-growth-graph"></div>
                    </div>
                    
                    <!-- Exercises for Section 1.4 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.4
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="exercise-tabs">
                                <div class="exercise-tab active" onclick="switchExerciseTab('1.4', 'A')">Part A</div>
                                <div class="exercise-tab" onclick="switchExerciseTab('1.4', 'B')">Part B</div>
                            </div>
                            
                            <!-- Part A -->
                            <div id="1.4-A" class="exercise-tab-content active">
                                <p><strong>A.</strong> Write the following sets by listing their elements between braces.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.4A.1: \(\mathcal{P}(\{\{a,b\},\{c\}\})\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter the power set..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.4A.1')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                            
                            <!-- Part B -->
                            <div id="1.4-B" class="exercise-tab-content">
                                <p><strong>B.</strong> Suppose that \(|A| = m\) and \(|B| = n\). Find the following cardinalities.</p>
                                
                                <div class="submission-area">
                                    <div class="submission-title">
                                        <i class="fas fa-question-circle"></i> Exercise 1.4B.13: \(|\mathcal{P}(\mathcal{P}(\mathcal{P}(A))))|\)
                                    </div>
                                    <textarea class="answer-input" placeholder="Enter the cardinality in terms of m..."></textarea>
                                    <button class="submit-btn" onclick="submitExercise('1.4B.13')">Submit Answer</button>
                                    <div class="submission-feedback"></div>
                                </div>
                                
                                <!-- More exercises would continue here -->
                                <p style="color: #666; font-style: italic;"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.3')">
                        <i class="fas fa-arrow-left"></i> Previous: Subsets
                    </button>
                    <button class="nav-btn" onclick="showSection('1.5')">
                        Next: Union, Intersection, Difference <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.5: Union, Intersection, Difference -->
            <section id="1.5" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-university"></i> 1.5 Union, Intersection, Difference</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.5')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definitions
                        </div>
                        <p>Suppose \(A\) and \(B\) are sets.</p>
                        <ul style="margin-left: 20px;">
                            <li>The <span class="highlight">union</span> of \(A\) and \(B\): \(A \cup B = \{x : x \in A \text{ or } x \in B\}\)</li>
                            <li>The <span class="highlight">intersection</span> of \(A\) and \(B\): \(A \cap B = \{x : x \in A \text{ and } x \in B\}\)</li>
                            <li>The <span class="highlight">difference</span> of \(A\) and \(B\): \(A - B = \{x : x \in A \text{ and } x \notin B\}\)</li>
                        </ul>
                    </div>
                    
                    <!-- Example 1.8 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.8 - Basic Set Operations
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Suppose \(A = \{a, b, c, d, e\}\), \(B = \{d, e, f\}\), and \(C = \{1, 2, 3\}\).</p>
                            <ol style="margin-left: 20px; margin-bottom: 15px;">
                                <li>\(A \cup B = \{a, b, c, d, e, f\}\)</li>
                                <li>\(A \cap B = \{d, e\}\)</li>
                                <li>\(A - B = \{a, b, c\}\)</li>
                                <li>\(B - A = \{f\}\)</li>
                                <li>\((A - B) \cup (B - A) = \{a, b, c, f\}\) (symmetric difference)</li>
                                <li>\(A \cup C = \{a, b, c, d, e, 1, 2, 3\}\)</li>
                                <li>\(A \cap C = \emptyset\)</li>
                                <li>\(A - C = \{a, b, c, d, e\}\)</li>
                                <li>\((A \cap C) \cup (A - C) = \{a, b, c, d, e\}\)</li>
                                <li>\((A \cap B) \times B = \{(d, d), (d, e), (d, f), (e, d), (e, e), (e, f)\}\)</li>
                                <li>\((A \times C) \cap (B \times C) = \{(d, 1), (d, 2), (d, 3), (e, 1), (e, 2), (e, 3)\}\)</li>
                            </ol>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-superscript"></i> Set Operations Calculator
                                </div>
                                <p>Perform operations on two sets:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>Set A: </label>
                                            <input type="text" id="setAOps" value="{a, b, c, d, e}" style="padding: 5px; width: 150px;">
                                        </div>
                                        <div>
                                            <label>Set B: </label>
                                            <input type="text" id="setBOps" value="{d, e, f}" style="padding: 5px; width: 150px;">
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <button class="control-btn" onclick="calculateUnion()">
                                            <i class="fas fa-university"></i> A ∪ B
                                        </button>
                                        <button class="control-btn" onclick="calculateIntersection()">
                                            <i class="fas fa-intersection"></i> A ∩ B
                                        </button>
                                        <button class="control-btn" onclick="calculateDifferenceAB()">
                                            <i class="fas fa-minus"></i> A - B
                                        </button>
                                        <button class="control-btn" onclick="calculateDifferenceBA()">
                                            <i class="fas fa-minus"></i> B - A
                                        </button>
                                        <button class="control-btn" onclick="calculateSymmetricDifference()">
                                            <i class="fas fa-not-equal"></i> A Δ B (Symmetric)
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="set-ops-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter sets and click an operation to see the result.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.9 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.9 - Set Operations with Graphs
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Let \(A = \{(x, x^2) : x \in \mathbb{R}\}\) be the graph of the equation \(y = x^2\) and let \(B = \{(x, x+2) : x \in \mathbb{R}\}\) be the graph of the equation \(y = x + 2\). These sets are subsets of \(\mathbb{R}^2\).</p>
                            
                            <p>Observe that \(A \cap B = \{(-1, 1), (2, 4)\}\) consists of just two elements, the two points where the graphs intersect.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-chart-line"></i> Graph Visualization
                                </div>
                                <p>Visualize the sets A (parabola) and B (line) and their operations:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="plotExample19('A')">
                                        Show A (y = x²)
                                    </button>
                                    <button class="control-btn" onclick="plotExample19('B')">
                                        Show B (y = x + 2)
                                    </button>
                                    <button class="control-btn" onclick="plotExample19('union')">
                                        Show A ∪ B
                                    </button>
                                    <button class="control-btn" onclick="plotExample19('intersection')">
                                        Show A ∩ B
                                    </button>
                                    <button class="control-btn" onclick="plotExample19('difference')">
                                        Show A - B
                                    </button>
                                </div>
                                
                                <div class="graph-container" id="example19-graph"></div>
                                
                                <p>In set builder notation:</p>
                                <ul style="margin-left: 20px;">
                                    <li>\(A \cup B = \{(x, y) : x \in \mathbb{R}, y = x^2 \text{ or } y = x + 2\}\)</li>
                                    <li>\(A - B = \{(x, x^2) : x \in \mathbb{R} - \{-1, 2\}\}\)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Properties of Set Operations</h3>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li><strong>Commutative:</strong> \(A \cup B = B \cup A\) and \(A \cap B = B \cap A\)</li>
                        <li><strong>Associative:</strong> \((A \cup B) \cup C = A \cup (B \cup C)\) and \((A \cap B) \cap C = A \cap (B \cap C)\)</li>
                        <li><strong>Distributive:</strong> \(A \cup (B \cap C) = (A \cup B) \cap (A \cup C)\) and \(A \cap (B \cup C) = (A \cap B) \cup (A \cap C)\)</li>
                        <li><strong>Not commutative:</strong> \(A - B \neq B - A\) in general</li>
                    </ul>
                    
                    <!-- Exercises for Section 1.5 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.5
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <p>Exercises 1-10 involve performing set operations on given sets. Use the interactive calculator above to check your work.</p>
                            
                            <div class="submission-area">
                                <div class="submission-title">
                                    <i class="fas fa-question-circle"></i> Exercise 1.5.1: Suppose \(A = \{4, 3, 6, 7, 1, 9\}\), \(B = \{5, 6, 8, 4\}\), \(C = \{5, 8, 4\}\)
                                </div>
                                <p>Find: (a) \(A \cup B\), (b) \(A \cap B\), (c) \(A - B\), (d) \(A - C\), (e) \(B - A\), (f) \(A \cap C\), (g) \(B \cap C\), (h) \(B \cup C\), (i) \(C - B\)</p>
                                <textarea class="answer-input" placeholder="Enter your answers..."></textarea>
                                <button class="submit-btn" onclick="submitExercise('1.5.1')">Submit Answer</button>
                                <div class="submission-feedback"></div>
                            </div>
                            
                            <!-- More exercises would continue here -->
                            <p style="color: #666; font-style: italic;"></p>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.4')">
                        <i class="fas fa-arrow-left"></i> Previous: Power Sets
                    </button>
                    <button class="nav-btn" onclick="showSection('1.6')">
                        Next: Complement <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.6: Complement -->
            <section id="1.6" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-complement"></i> 1.6 Complement</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.6')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Complement
                        </div>
                        <p>Let \(A\) be a set with a universal set \(U\). The <span class="highlight">complement</span> of \(A\), denoted \(\overline{A}\) or \(A^c\), is the set:</p>
                        <div class="math">
                            \( \overline{A} = U - A = \{x \in U : x \notin A\} \)
                        </div>
                    </div>
                    
                    <p>The complement of a set consists of all elements in the universal set that are <em>not</em> in the set.</p>
                    
                    <!-- Example 1.10 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.10 - Complement of Prime Numbers
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>If \(P\) is the set of prime numbers within the universal set \(\mathbb{N}\), then:</p>
                            <div class="math">
                                \( \overline{P} = \mathbb{N} - P = \{1, 4, 6, 8, 9, 10, 12, \ldots\} \)
                            </div>
                            <p>Thus \(\overline{P}\) is the set of composite numbers and 1.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-exchange-alt"></i> Complement Calculator
                                </div>
                                <p>Calculate the complement of a set within a universal set:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>Universal Set U: </label>
                                            <input type="text" id="universalSet" value="{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}" style="padding: 5px; width: 200px;">
                                        </div>
                                        <div>
                                            <label>Set A: </label>
                                            <input type="text" id="setAComplement" value="{2, 4, 6, 8}" style="padding: 5px; width: 150px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="calculateComplement()">
                                        <i class="fas fa-calculator"></i> Calculate Complement
                                    </button>
                                </div>
                                
                                <div id="complement-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter the universal set and a subset to calculate its complement.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.11 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.11 - Complement of a Graph
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Let \(A = \{(x, x^2) : x \in \mathbb{R}\}\) be the graph of the equation \(y = x^2\). Figure 1.6(a) shows \(A\) in its universal set \(\mathbb{R}^2\). The complement of \(A\) is \(\overline{A} = \mathbb{R}^2 - A = \{(x, y) \in \mathbb{R}^2 : y \neq x^2\}\).</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-chart-area"></i> Graph and Complement Visualization
                                </div>
                                <p>Visualize the set A (parabola) and its complement in \(\mathbb{R}^2\):</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="plotExample111('A')">
                                        Show A (y = x²)
                                    </button>
                                    <button class="control-btn" onclick="plotExample111('complement')">
                                        Show Complement of A
                                    </button>
                                    <button class="control-btn" onclick="plotExample111('both')">
                                        Show Both
                                    </button>
                                </div>
                                
                                <div class="graph-container" id="example111-graph"></div>
                                
                                <p>The complement consists of all points in the plane that are NOT on the parabola \(y = x^2\).</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Properties of Complement</h3>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li><strong>Double Complement:</strong> \(\overline{\overline{A}} = A\)</li>
                        <li><strong>Complement Laws:</strong> \(A \cup \overline{A} = U\) and \(A \cap \overline{A} = \emptyset\)</li>
                        <li><strong>De Morgan's Laws:</strong> \(\overline{A \cup B} = \overline{A} \cap \overline{B}\) and \(\overline{A \cap B} = \overline{A} \cup \overline{B}\)</li>
                        <li><strong>Universal and Empty Set Complements:</strong> \(\overline{U} = \emptyset\) and \(\overline{\emptyset} = U\)</li>
                    </ul>
                    
                    <div class="fact">
                        <div class="fact-title">
                            <i class="fas fa-check-circle"></i> Visualizing Complements
                        </div>
                        <p>In a Venn diagram, the complement of a set \(A\) is everything in the universal set that is outside of \(A\).</p>
                    </div>
                    
                    <!-- Exercises for Section 1.6 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.6
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="submission-area">
                                <div class="submission-title">
                                    <i class="fas fa-question-circle"></i> Exercise 1.6.1: Let \(A = \{4, 3, 6, 7, 1, 9\}\) and \(B = \{5, 6, 8, 4\}\) have universal set \(U = \{0, 1, 2, \ldots, 10\}\)
                                </div>
                                <p>Find: (a) \(\overline{A}\), (b) \(\overline{B}\), (c) \(A \cap \overline{A}\), (d) \(A \cup \overline{A}\), (e) \(A - \overline{A}\), (f) \(A - \overline{B}\), (g) \(\overline{A} - \overline{B}\), (h) \(\overline{A} \cap B\), (i) \(\overline{A} \cap \overline{B}\)</p>
                                <textarea class="answer-input" placeholder="Enter your answers..."></textarea>
                                <button class="submit-btn" onclick="submitExercise('1.6.1')">Submit Answer</button>
                                <div class="submission-feedback"></div>
                            </div>
                            
                            <!-- More exercises would continue here -->
                            <p style="color: #666; font-style: italic;"></p>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.5')">
                        <i class="fas fa-arrow-left"></i> Previous: Union, Intersection, Difference
                    </button>
                    <button class="nav-btn" onclick="showSection('1.7')">
                        Next: Venn Diagrams <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.7: Venn Diagrams -->
            <section id="1.7" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-draw-polygon"></i> 1.7 Venn Diagrams</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.7')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <p>A <span class="highlight">Venn diagram</span> is a schematic diagram that uses circles (or other shapes) to represent sets and their relationships. They are named after John Venn (1834-1923).</p>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Basic Venn Diagrams for Two Sets
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Figures 1.7(a-c) show two sets \(A\) and \(B\) that overlap in a middle region. The sets \(A \cup B\), \(A \cap B\) and \(A - B\) are shaded.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-draw-polygon"></i> Interactive Venn Diagram
                                </div>
                                <p>Adjust the sets to see different Venn diagram regions:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>Set A: </label>
                                            <input type="text" id="vennSetA" value="{1, 2, 3, 4, 5}" style="padding: 5px; width: 150px;">
                                        </div>
                                        <div>
                                            <label>Set B: </label>
                                            <input type="text" id="vennSetB" value="{4, 5, 6, 7, 8}" style="padding: 5px; width: 150px;">
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <button class="control-btn" onclick="showVennRegion('union')">
                                            <i class="fas fa-university"></i> A ∪ B
                                        </button>
                                        <button class="control-btn" onclick="showVennRegion('intersection')">
                                            <i class="fas fa-intersection"></i> A ∩ B
                                        </button>
                                        <button class="control-btn" onclick="showVennRegion('complement')">
                                            <i class="fas fa-complement"></i> A complement
                                        </button>
                                        <button class="control-btn" onclick="showVennRegion('difference')">
                                            <i class="fas fa-minus"></i> A - B
                                        </button>
                                        <button class="control-btn" onclick="showVennRegion('symmetric')">
                                            <i class="fas fa-not-equal"></i> A Δ B
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="venn-container">
                                    <canvas id="vennCanvas" width="500" height="300" style="width: 100%; height: 300px;"></canvas>
                                </div>
                                
                                <div id="venn-explanation" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Select a set operation to visualize it in the Venn diagram above.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Using Venn Diagrams for Three Sets</h3>
                    <p>Venn diagrams can also represent three sets. The standard diagram uses three overlapping circles that create eight regions:</p>
                    <ol style="margin-left: 20px; margin-bottom: 20px;">
                        <li>Elements in A only</li>
                        <li>Elements in B only</li>
                        <li>Elements in C only</li>
                        <li>Elements in A and B but not C</li>
                        <li>Elements in A and C but not B</li>
                        <li>Elements in B and C but not A</li>
                        <li>Elements in A, B, and C</li>
                        <li>Elements in none of A, B, or C</li>
                    </ol>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Three-Set Venn Diagrams
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Let's consider expressions with three sets like \((A \cup B) \cap C\) and \(A \cup (B \cap C)\).</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-draw-polygon"></i> Three-Set Venn Diagram
                                </div>
                                <p>Visualize expressions with three sets:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showThreeVenn('A∪B∩C')">
                                        (A ∪ B) ∩ C
                                    </button>
                                    <button class="control-btn" onclick="showThreeVenn('A∪(B∩C)')">
                                        A ∪ (B ∩ C)
                                    </button>
                                    <button class="control-btn" onclick="showThreeVenn('A∩B∩C')">
                                        A ∩ B ∩ C
                                    </button>
                                    <button class="control-btn" onclick="showThreeVenn('A∪B∪C')">
                                        A ∪ B ∪ C
                                    </button>
                                </div>
                                
                                <div class="venn-container">
                                    <canvas id="threeVennCanvas" width="500" height="300" style="width: 100%; height: 300px;"></canvas>
                                </div>
                                
                                <div id="three-venn-explanation" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Select an expression to visualize it in the three-set Venn diagram.</p>
                                </div>
                            </div>
                            
                            <div class="fact">
                                <div class="fact-title">
                                    <i class="fas fa-check-circle"></i> Important Note
                                </div>
                                <p>Venn diagrams are useful for understanding set relationships and for "scratch work," but they are not formal proofs. They help develop intuition and strategies for solving problems.</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Parentheses in Set Expressions</h3>
                    <p>When combining set operations, parentheses matter:</p>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li>If an expression uses only ∪, parentheses are optional (associative property)</li>
                        <li>If an expression uses only ∩, parentheses are optional (associative property)</li>
                        <li>If an expression uses both ∪ and ∩, parentheses are essential</li>
                    </ul>
                    <div class="math">
                        \( (A \cup B) \cap C \neq A \cup (B \cap C) \text{ in general} \)
                    </div>
                    
                    <!-- Exercises for Section 1.7 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.7
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <p>Exercises 1-14 involve drawing Venn diagrams for various set expressions.</p>
                            
                            <div class="submission-area">
                                <div class="submission-title">
                                    <i class="fas fa-question-circle"></i> Exercise 1.7.1: Draw a Venn diagram for \(\overline{A}\), where \(A\) is a subset of a universal set \(U\)
                                </div>
                                <p>Draw your Venn diagram:</p>
                                <div class="venn-container">
                                    <canvas id="exercise17-1-canvas" width="500" height="300" style="width: 100%; height: 300px; border: 1px dashed #ccc;"></canvas>
                                </div>
                                <div class="controls">
                                    <button class="control-btn" onclick="drawOnCanvas('exercise17-1-canvas')">
                                        <i class="fas fa-pencil-alt"></i> Draw
                                    </button>
                                    <button class="control-btn" onclick="clearCanvas('exercise17-1-canvas')">
                                        <i class="fas fa-eraser"></i> Clear
                                    </button>
                                </div>
                                <textarea class="answer-input" placeholder="Describe your diagram or upload an image..."></textarea>
                                <div class="file-upload" onclick="document.getElementById('file-1-7-1').click()">
                                    <i class="fas fa-upload"></i> Click to upload diagram image
                                    <input type="file" id="file-1-7-1" style="display: none;" accept="image/*">
                                </div>
                                <button class="submit-btn" onclick="submitExercise('1.7.1')">Submit Answer</button>
                                <div class="submission-feedback"></div>
                            </div>
                            
                            <!-- More exercises would continue here -->
                            <p style="color: #666; font-style: italic;"></p>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.6')">
                        <i class="fas fa-arrow-left"></i> Previous: Complement
                    </button>
                    <button class="nav-btn" onclick="showSection('1.8')">
                        Next: Indexed Sets <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.8: Indexed Sets -->
            <section id="1.8" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-list-ol"></i> 1.8 Indexed Sets</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.8')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <p>When working with many sets, it's convenient to use subscripts (indices) to keep track of them. Instead of \(A, B, C, \ldots\), we write \(A_1, A_2, A_3, \ldots\).</p>
                    
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Definition: Union and Intersection of Indexed Sets
                        </div>
                        <p>Suppose \(A_1, A_2, \ldots, A_n\) are sets. Then:</p>
                        <div class="math">
                            \( \bigcup_{i=1}^{n} A_i = A_1 \cup A_2 \cup \cdots \cup A_n = \{x : x \in A_i \text{ for at least one } i, 1 \leq i \leq n\} \)
                        </div>
                        <div class="math">
                            \( \bigcap_{i=1}^{n} A_i = A_1 \cap A_2 \cap \cdots \cap A_n = \{x : x \in A_i \text{ for every } i, 1 \leq i \leq n\} \)
                        </div>
                    </div>
                    
                    <!-- Example 1.12 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.12 - Finite Indexed Sets
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Suppose \(A_1 = \{0, 2, 5\}\), \(A_2 = \{1, 2, 5\}\), and \(A_3 = \{2, 5, 7\}\). Then:</p>
                            <div class="math">
                                \( \bigcup_{i=1}^{3} A_i = A_1 \cup A_2 \cup A_3 = \{0, 1, 2, 5, 7\} \)
                            </div>
                            <div class="math">
                                \( \bigcap_{i=1}^{3} A_i = A_1 \cap A_2 \cap A_3 = \{2, 5\} \)
                            </div>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-calculator"></i> Indexed Sets Calculator
                                </div>
                                <p>Enter indexed sets and calculate their union and intersection:</p>
                                
                                <div class="controls">
                                    <div style="margin-bottom: 15px;">
                                        <label>Enter sets as A1, A2, A3 (comma-separated elements):</label>
                                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                                            <div>
                                                <input type="text" id="indexedSet1" value="0, 2, 5" placeholder="A1" style="padding: 5px; width: 100px;">
                                            </div>
                                            <div>
                                                <input type="text" id="indexedSet2" value="1, 2, 5" placeholder="A2" style="padding: 5px; width: 100px;">
                                            </div>
                                            <div>
                                                <input type="text" id="indexedSet3" value="2, 5, 7" placeholder="A3" style="padding: 5px; width: 100px;">
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <button class="control-btn" onclick="calculateIndexedUnion()">
                                            <i class="fas fa-university"></i> Calculate Union
                                        </button>
                                        <button class="control-btn" onclick="calculateIndexedIntersection()">
                                            <i class="fas fa-intersection"></i> Calculate Intersection
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="indexed-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter sets and click an operation to see the result.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.13 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.13 - Infinite Indexed Sets
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>This example involves the following infinite list of sets:</p>
                            <div class="math">
                                \( A_1 = \{-1, 0, 1\}, \quad A_2 = \{-2, 0, 2\}, \quad A_3 = \{-3, 0, 3\}, \quad \ldots, \quad A_i = \{-i, 0, i\}, \quad \ldots \)
                            </div>
                            <p>Observe that:</p>
                            <div class="math">
                                \( \bigcup_{i=1}^{\infty} A_i = \mathbb{Z}, \quad \text{and} \quad \bigcap_{i=1}^{\infty} A_i = \{0\} \)
                            </div>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-infinity"></i> Infinite Indexed Sets Visualization
                                </div>
                                <p>Visualize the union and intersection of \(A_i = \{-i, 0, i\}\):</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showInfiniteIndexedSets()">
                                        <i class="fas fa-eye"></i> Show First 10 Sets
                                    </button>
                                    <button class="control-btn" onclick="showInfiniteUnion()">
                                        <i class="fas fa-university"></i> Show Union
                                    </button>
                                    <button class="control-btn" onclick="showInfiniteIntersection()">
                                        <i class="fas fa-intersection"></i> Show Intersection
                                    </button>
                                </div>
                                
                                <div id="infinite-indexed-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 100px;">
                                    <p>Click buttons to visualize the infinite indexed sets.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.14 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.14 - Indexed Sets as Rectangles
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>In this example, all sets \(A_{\alpha}\) are subsets of the plane \(\mathbb{R}^2\). Each \(\alpha\) belongs to the index set \(I = [0, 2]\). For each number \(\alpha \in I\), define \(A_{\alpha}\) to be the set \(A_{\alpha} = [\alpha, 2] \times [0, \alpha]\), which is a rectangle.</p>
                            
                            <p>The union \(\bigcup_{\alpha \in I} A_{\alpha}\) is a triangle, and the intersection \(\bigcap_{\alpha \in I} A_{\alpha} = \{(2, 0)\}\).</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-draw-polygon"></i> Indexed Rectangles Visualization
                                </div>
                                <p>Visualize the indexed rectangles \(A_{\alpha} = [\alpha, 2] \times [0, \alpha]\):</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; margin-bottom: 15px; align-items: center;">
                                        <div>
                                            <label>α value: </label>
                                            <input type="range" id="alphaRange" min="0" max="2" step="0.1" value="1" style="width: 150px;">
                                            <span id="alphaValue">1.0</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <button class="control-btn" onclick="showIndexedRectangle()">
                                            <i class="fas fa-square"></i> Show Rectangle Aα
                                        </button>
                                        <button class="control-btn" onclick="showIndexedUnion()">
                                            <i class="fas fa-university"></i> Show Union
                                        </button>
                                        <button class="control-btn" onclick="showIndexedIntersection()">
                                            <i class="fas fa-intersection"></i> Show Intersection
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="graph-container" id="indexed-rectangles-graph"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example 1.15 -->
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example 1.15 - Planes in ℝ³
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Here our sets are indexed by \(\mathbb{R}^2\). For any \((a, b) \in \mathbb{R}^2\), let \(P_{(a, b)}\) be the following subset of \(\mathbb{R}^3\):</p>
                            <div class="math">
                                \( P_{(a, b)} = \{(x, y, z) \in \mathbb{R}^3 : ax + by = 0\} \)
                            </div>
                            <p>Each \(P_{(a, b)}\) is a plane in \(\mathbb{R}^3\) containing the z-axis.</p>
                            
                            <p>The intersection \(\bigcap_{(a, b) \in \mathbb{R}^2} P_{(a, b)}\) is the z-axis, and the union \(\bigcup_{(a, b) \in \mathbb{R}^2} P_{(a, b)} = \mathbb{R}^3\).</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-cube"></i> Planes in 3D Visualization
                                </div>
                                <p>Visualize planes \(P_{(a, b)}\) in \(\mathbb{R}^3\):</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                                        <div>
                                            <label>a: </label>
                                            <input type="number" id="planeA" value="1" step="0.5" style="padding: 5px; width: 70px;">
                                        </div>
                                        <div>
                                            <label>b: </label>
                                            <input type="number" id="planeB" value="2" step="0.5" style="padding: 5px; width: 70px;">
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <button class="control-btn" onclick="showPlaneIn3D()">
                                            <i class="fas fa-draw-polygon"></i> Show Plane P(a,b)
                                        </button>
                                        <button class="control-btn" onclick="showZAxis()">
                                            <i class="fas fa-arrows-alt-v"></i> Show z-axis
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="graph-container" id="3d-planes-graph"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Exercises for Section 1.8 -->
                    <div class="exercise">
                        <div class="exercise-header">
                            <div class="exercise-title">
                                <i class="fas fa-tasks"></i> Exercises for Section 1.8
                            </div>
                            <button class="exercise-toggle" onclick="toggleExercise(this)">
                                Show Exercises
                            </button>
                        </div>
                        <div class="exercise-content collapsed">
                            <div class="submission-area">
                                <div class="submission-title">
                                    <i class="fas fa-question-circle"></i> Exercise 1.8.1: Suppose \(A_1 = \{a, b, d, e, g, f\}\), \(A_2 = \{a, b, c, d\}\), \(A_3 = \{b, d, a\}\), \(A_4 = \{a, b, h\}\)
                                </div>
                                <p>Find: (a) \(\bigcup_{i=1}^{4} A_i\), (b) \(\bigcap_{i=1}^{4} A_i\)</p>
                                <textarea class="answer-input" placeholder="Enter your answers..."></textarea>
                                <button class="submit-btn" onclick="submitExercise('1.8.1')">Submit Answer</button>
                                <div class="submission-feedback"></div>
                            </div>
                            
                            <!-- More exercises would continue here -->
                            <p style="color: #666; font-style: italic;"></p>
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.7')">
                        <i class="fas fa-arrow-left"></i> Previous: Venn Diagrams
                    </button>
                    <button class="nav-btn" onclick="showSection('1.9')">
                        Next: Number Systems <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.9: Sets That Are Number Systems -->
            <section id="1.9" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-calculator"></i> 1.9 Sets That Are Number Systems</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.9')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <p>The sets \(\mathbb{N}\), \(\mathbb{Z}\), \(\mathbb{Q}\), and \(\mathbb{R}\) are familiar number systems with special properties and structures.</p>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Number System Hierarchy
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-sort-amount-down"></i> Number System Hierarchy
                                </div>
                                <p>Explore the relationships between different number systems:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showNumberHierarchy()">
                                        <i class="fas fa-project-diagram"></i> Show Hierarchy
                                    </button>
                                    <button class="control-btn" onclick="showNumberExamples()">
                                        <i class="fas fa-list"></i> Show Examples
                                    </button>
                                </div>
                                
                                <div id="number-system-info" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 100px;">
                                    <p>Click buttons to explore number systems.</p>
                                </div>
                            </div>
                            
                            <p>The number systems form a nested hierarchy:</p>
                            <div class="math" style="text-align: center; font-size: 1.3rem;">
                                \( \mathbb{N} \subset \mathbb{Z} \subset \mathbb{Q} \subset \mathbb{R} \)
                            </div>
                        </div>
                    </div>
                    
                    <h3>The Well-Ordering Principle</h3>
                    <p>Any non-empty subset of \(\mathbb{N}\) has a smallest element. This is called the <span class="highlight">well-ordering principle</span>.</p>
                    
                    <div class="math">
                        \( \text{If } A \subseteq \mathbb{N} \text{ and } A \neq \emptyset, \text{ then } \exists x_0 \in A \text{ such that } x_0 \leq x \text{ for all } x \in A \)
                    </div>
                    
                    <div class="fact">
                        <div class="fact-title">
                            <i class="fas fa-check-circle"></i> Note
                        </div>
                        <p>The well-ordering principle is special to the positive integers. The positive real numbers do not have this property. For example, the set \(\{\frac{1}{n} : n \in \mathbb{N}\}\) has no smallest element.</p>
                    </div>
                    
                    <h3>The Division Algorithm</h3>
                    <div class="definition">
                        <div class="definition-title">
                            <i class="fas fa-book"></i> Fact 1.5: Division Algorithm
                        </div>
                        <p>Given integers \(a\) and \(b\) with \(b > 0\), there exist unique integers \(q\) (quotient) and \(r\) (remainder) such that:</p>
                        <div class="math">
                            \( a = qb + r \quad \text{and} \quad 0 \leq r < b \)
                        </div>
                    </div>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Division Algorithm
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-divide"></i> Division Algorithm Calculator
                                </div>
                                <p>Apply the division algorithm to find quotient and remainder:</p>
                                
                                <div class="controls">
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
                                        <div>
                                            <label>a (dividend): </label>
                                            <input type="number" id="dividend" value="17" style="padding: 5px; width: 100px;">
                                        </div>
                                        <div>
                                            <label>b (divisor, b>0): </label>
                                            <input type="number" id="divisor" value="3" style="padding: 5px; width: 100px;">
                                        </div>
                                    </div>
                                    <button class="control-btn" onclick="calculateDivision()">
                                        <i class="fas fa-calculator"></i> Calculate q and r
                                    </button>
                                </div>
                                
                                <div id="division-result" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                                    <p>Enter values and click calculate to see the division algorithm in action.</p>
                                </div>
                            </div>
                            
                            <p>The division algorithm follows from the well-ordering principle. Consider the set:</p>
                            <div class="math">
                                \( A = \{a - xb : x \in \mathbb{Z}, \, 0 \leq a - xb\} \subseteq \{0, 1, 2, 3, \ldots\} \)
                            </div>
                            <p>By the well-ordering principle, \(A\) has a smallest element \(r = a - qb\). Then \(a = qb + r\) with \(0 \leq r < b\).</p>
                        </div>
                    </div>
                    
                    <h3>Numbers as Sets</h3>
                    <p>In set theory, numbers themselves can be defined as sets:</p>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li>\(0 = \emptyset\)</li>
                        <li>\(1 = \{\emptyset\} = \{0\}\)</li>
                        <li>\(2 = \{\emptyset, \{\emptyset\}\} = \{0, 1\}\)</li>
                        <li>\(3 = \{\emptyset, \{\emptyset\}, \{\emptyset, \{\emptyset\}\}\} = \{0, 1, 2\}\)</li>
                        <li>In general: \(n = \{0, 1, 2, \ldots, n-1\}\)</li>
                    </ul>
                    
                    <div class="interactive-box">
                        <div class="interactive-title">
                            <i class="fas fa-sitemap"></i> Numbers as Sets Visualization
                        </div>
                        <p>See how natural numbers can be represented as sets:</p>
                        
                        <div class="controls">
                            <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label>Select a number: </label>
                                    <select id="numberAsSet" style="padding: 5px;">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2" selected>2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                            </div>
                            <button class="control-btn" onclick="showNumberAsSet()">
                                <i class="fas fa-eye"></i> Show Set Representation
                            </button>
                        </div>
                        
                        <div id="number-set-representation" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 50px;">
                            <p>Select a number and click to see its set representation.</p>
                        </div>
                    </div>
                    
                    <p>This approach shows that all of mathematics can be built from set theory.</p>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.8')">
                        <i class="fas fa-arrow-left"></i> Previous: Indexed Sets
                    </button>
                    <button class="nav-btn" onclick="showSection('1.10')">
                        Next: Russell's Paradox <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- Section 1.10: Russell's Paradox -->
            <section id="1.10" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> 1.10 Russell's Paradox</h2>
                    <button class="control-btn" onclick="toggleSectionExamples('1.10')">
                        <i class="fas fa-expand"></i> Toggle Examples
                    </button>
                </div>
                
                <div class="content-block">
                    <p>Bertrand Russell (1872-1970) discovered a paradox in naive set theory that sparked a crisis in the foundations of mathematics.</p>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: Russell's Paradox
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <div class="definition">
                                <div class="definition-title">
                                    <i class="fas fa-book"></i> Russell's Paradox
                                </div>
                                <p>Consider the set of all sets that do not contain themselves as elements:</p>
                                <div class="math">
                                    \( A = \{X : X \text{ is a set and } X \notin X\} \)
                                </div>
                                <p>Now ask: Is \(A\) an element of \(A\)?</p>
                            </div>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-question-circle"></i> Explore Russell's Paradox
                                </div>
                                <p>Follow the logical steps of Russell's paradox:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showParadoxStep(1)">
                                        Step 1: Define A
                                    </button>
                                    <button class="control-btn" onclick="showParadoxStep(2)">
                                        Step 2: Assume A ∈ A
                                    </button>
                                    <button class="control-btn" onclick="showParadoxStep(3)">
                                        Step 3: Assume A ∉ A
                                    </button>
                                    <button class="control-btn" onclick="showParadoxStep(4)">
                                        Step 4: The Contradiction
                                    </button>
                                </div>
                                
                                <div id="paradox-explanation" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 150px;">
                                    <p>Click the buttons to follow the steps of Russell's paradox.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>The Paradox Unfolds</h3>
                    <p>If we assume \(A \in A\), then by definition of \(A\), we must have \(A \notin A\) (since \(A\) contains only sets that don't contain themselves).</p>
                    
                    <p>If we assume \(A \notin A\), then \(A\) satisfies the condition for belonging to \(A\), so \(A \in A\).</p>
                    
                    <div class="math">
                        \( A \in A \Rightarrow A \notin A \quad \text{and} \quad A \notin A \Rightarrow A \in A \)
                    </div>
                    
                    <p>This is a contradiction: \(A\) both is and is not a member of itself.</p>
                    
                    <div class="example">
                        <div class="example-header">
                            <div class="example-title">
                                <i class="fas fa-pen"></i> Example: The Barber Paradox
                            </div>
                            <button class="example-toggle" onclick="toggleExample(this)">
                                Show Example
                            </button>
                        </div>
                        <div class="example-content collapsed">
                            <p>Russell's paradox has a popular analogy known as the Barber Paradox:</p>
                            <p>In a village, the barber shaves all those and only those who do not shave themselves. Who shaves the barber?</p>
                            <p>If the barber shaves himself, then by definition he shouldn't. If he doesn't shave himself, then by definition he should. This is a contradiction.</p>
                            
                            <div class="interactive-box">
                                <div class="interactive-title">
                                    <i class="fas fa-user-check"></i> Barber Paradox Interactive
                                </div>
                                <p>Explore the Barber Paradox:</p>
                                
                                <div class="controls">
                                    <button class="control-btn" onclick="showBarberParadox(1)">
                                        Step 1: The Rule
                                    </button>
                                    <button class="control-btn" onclick="showBarberParadox(2)">
                                        Step 2: Does barber shave himself?
                                    </button>
                                    <button class="control-btn" onclick="showBarberParadox(3)">
                                        Step 3: The Contradiction
                                    </button>
                                </div>
                                
                                <div id="barber-paradox-explanation" style="padding: 15px; margin-top: 15px; background-color: white; border: 1px solid #ddd; border-radius: 5px; min-height: 100px;">
                                    <p>Click the buttons to explore the Barber Paradox.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fact">
                        <div class="fact-title">
                            <i class="fas fa-check-circle"></i> Resolution: Axiomatic Set Theory
                        </div>
                        <p>Russell's paradox showed that naive set theory (where any definable collection is a set) is inconsistent. Mathematicians responded by developing axiomatic set theories, such as Zermelo-Fraenkel set theory (ZF), which include restrictions on what can be a set to avoid such paradoxes.</p>
                    </div>
                    
                    <h3>Significance of Russell's Paradox</h3>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li>It showed the need for careful formulation of set theory</li>
                        <li>It led to the development of axiomatic set theory</li>
                        <li>It highlighted the importance of precision in mathematical language</li>
                        <li>It inspired deeper investigation into the foundations of mathematics</li>
                    </ul>
                    
                    <p>Russell's paradox reminds us that mathematics requires careful attention to definitions and logical consistency.</p>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.9')">
                        <i class="fas fa-arrow-left"></i> Previous: Number Systems
                    </button>
                    <button class="nav-btn" onclick="showSection('exercises')">
                        Next: All Exercises <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- All Exercises Section -->
            <section id="exercises" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-tasks"></i> All Exercises</h2>
                    <button class="control-btn" onclick="toggleAllExercises()">
                        <i class="fas fa-expand"></i> Expand All
                    </button>
                </div>
                
                <div class="content-block">
                    <p>This section contains all exercises from the chapter organized by section. You can submit your answers here and track your progress.</p>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="exercises-progress"></div>
                    </div>
                    <p id="exercises-progress-text">Exercise Completion: 0% (0/0)</p>
                    
                    <div class="exercise-tabs">
                        <div class="exercise-tab active" onclick="switchAllExercisesTab('1.1')">1.1</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.2')">1.2</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.3')">1.3</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.4')">1.4</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.5')">1.5</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.6')">1.6</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.7')">1.7</div>
                        <div class="exercise-tab" onclick="switchAllExercisesTab('1.8')">1.8</div>
                    </div>
                    
                    <!-- Section 1.1 Exercises -->
                    <div id="all-1.1" class="exercise-tab-content active">
                        <h3>Section 1.1 Exercises</h3>
                        <p><strong>Part A:</strong> Write each of the following sets by listing their elements between braces.</p>
                        
                        <div class="submission-area">
                            <div class="submission-title">
                                <i class="fas fa-question-circle"></i> 1.1A.1: \(\{5x - 1 : x \in \mathbb{Z}\}\)
                            </div>
                            <textarea class="answer-input" placeholder="Enter your answer here..."></textarea>
                            <div class="controls">
                                <button class="control-btn" onclick="submitExercise('1.1A.1-all')">Submit</button>
                                <button class="control-btn accent" onclick="showExerciseHint('1.1A.1')">Hint</button>
                            </div>
                            <div class="submission-feedback"></div>
                        </div>
                        
                        <!-- More exercises would continue here -->
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <!-- Section 1.2 Exercises -->
                    <div id="all-1.2" class="exercise-tab-content">
                        <h3>Section 1.2 Exercises</h3>
                        <p><strong>Part A:</strong> Write out the indicated sets by listing their elements between braces.</p>
                        
                        <div class="submission-area">
                            <div class="submission-title">
                                <i class="fas fa-question-circle"></i> 1.2A.1: Suppose \(A = \{1, 2, 3, 4\}\) and \(B = \{a, c\}\)
                            </div>
                            <p>Find: (a) \(A \times B\), (b) \(B \times A\), (c) \(A \times A\), (d) \(B \times B\)</p>
                            <textarea class="answer-input" placeholder="Enter your answers here..."></textarea>
                            <div class="controls">
                                <button class="control-btn" onclick="submitExercise('1.2A.1-all')">Submit</button>
                                <button class="control-btn accent" onclick="showExerciseHint('1.2A.1')">Hint</button>
                            </div>
                            <div class="submission-feedback"></div>
                        </div>
                        
                        <!-- More exercises would continue here -->
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <!-- Other sections would follow the same pattern -->
                    <div id="all-1.3" class="exercise-tab-content">
                        <h3>Section 1.3 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <div id="all-1.4" class="exercise-tab-content">
                        <h3>Section 1.4 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <div id="all-1.5" class="exercise-tab-content">
                        <h3>Section 1.5 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <div id="all-1.6" class="exercise-tab-content">
                        <h3>Section 1.6 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <div id="all-1.7" class="exercise-tab-content">
                        <h3>Section 1.7 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                    
                    <div id="all-1.8" class="exercise-tab-content">
                        <h3>Section 1.8 Exercises</h3>
                        <p style="color: #666; font-style: italic;"></p>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('1.10')">
                        <i class="fas fa-arrow-left"></i> Previous: Russell's Paradox
                    </button>
                    <button class="nav-btn" onclick="showSection('submissions')">
                        Next: My Submissions <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </section>

            <!-- My Submissions Section -->
            <section id="submissions" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-upload"></i> My Submissions</h2>
                    <button class="control-btn" onclick="clearAllSubmissions()">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
                
                <div class="content-block">
                    <p>View all your exercise submissions and track your progress.</p>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="submissions-progress"></div>
                    </div>
                    <p id="submissions-progress-text">Overall Progress: 0%</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Exercise</th>
                                <th>Your Answer</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="submissions-table">
                            <tr>
                                <td colspan="5" style="text-align: center;">No submissions yet. Complete exercises to see them here.</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="interactive-box">
                        <div class="interactive-title">
                            <i class="fas fa-download"></i> Export Submissions
                        </div>
                        <p>Export your submissions as a JSON file:</p>
                        <div class="controls">
                            <button class="control-btn" onclick="exportSubmissions()">
                                <i class="fas fa-file-export"></i> Export to JSON
                            </button>
                            <button class="control-btn" onclick="importSubmissions()">
                                <i class="fas fa-file-import"></i> Import from JSON
                            </button>
                            <input type="file" id="import-file" style="display: none;" accept=".json">
                        </div>
                    </div>
                </div>
                
                <div class="section-nav">
                    <button class="nav-btn" onclick="showSection('exercises')">
                        <i class="fas fa-arrow-left"></i> Previous: All Exercises
                    </button>
                    <div></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Global variables
        let submissions = JSON.parse(localStorage.getItem('setsTheorySubmissions')) || {};
        let progress = JSON.parse(localStorage.getItem('setsTheoryProgress')) || { sections: {} };
        
        // Navigation between sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active link in sidebar
            document.querySelectorAll('.section-list a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + sectionId) {
                    link.classList.add('active');
                }
            });
            
            // Scroll to top of main content
            document.querySelector('.main-content').scrollTop = 0;
            
            // Update MathJax rendering
            if (window.MathJax) {
                setTimeout(() => MathJax.typeset(), 100);
            }
            
            // Update progress
            updateProgress();
        }

        // Set up sidebar navigation
        document.querySelectorAll('.section-list a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('href').substring(1);
                showSection(sectionId);
            });
        });

        // Toggle functions for examples and exercises
        function toggleExample(button) {
            const content = button.closest('.example').querySelector('.example-content');
            content.classList.toggle('collapsed');
            button.textContent = content.classList.contains('collapsed') ? 'Show Example' : 'Hide Example';
        }

        function toggleExercise(button) {
            const content = button.closest('.exercise').querySelector('.exercise-content');
            content.classList.toggle('collapsed');
            button.textContent = content.classList.contains('collapsed') ? 'Show Exercises' : 'Hide Exercises';
        }

        function toggleInteractive(button) {
            const content = button.closest('.interactive-box').querySelector('.interactive-content');
            content.classList.toggle('collapsed');
            button.textContent = content.classList.contains('collapsed') ? 'Show Content' : 'Hide Content';
        }

        function toggleSectionExamples(sectionId) {
            const examples = document.getElementById(sectionId).querySelectorAll('.example-content');
            const anyCollapsed = Array.from(examples).some(example => example.classList.contains('collapsed'));
            
            examples.forEach(example => {
                if (anyCollapsed) {
                    example.classList.remove('collapsed');
                } else {
                    example.classList.add('collapsed');
                }
            });
            
            // Update toggle buttons
            document.getElementById(sectionId).querySelectorAll('.example-toggle').forEach(button => {
                button.textContent = anyCollapsed ? 'Hide Example' : 'Show Example';
            });
        }

        function toggleAllExamples() {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                const examples = section.querySelectorAll('.example-content');
                examples.forEach(example => {
                    example.classList.remove('collapsed');
                });
                
                // Update toggle buttons
                section.querySelectorAll('.example-toggle').forEach(button => {
                    button.textContent = 'Hide Example';
                });
            });
        }

        function toggleAllExercises() {
            const exercises = document.querySelectorAll('.exercise-content');
            const anyCollapsed = Array.from(exercises).some(exercise => exercise.classList.contains('collapsed'));
            
            exercises.forEach(exercise => {
                if (anyCollapsed) {
                    exercise.classList.remove('collapsed');
                } else {
                    exercise.classList.add('collapsed');
                }
            });
            
            // Update toggle buttons
            document.querySelectorAll('.exercise-toggle').forEach(button => {
                button.textContent = anyCollapsed ? 'Hide Exercises' : 'Show Exercises';
            });
        }

        // Exercise tab switching
        function switchExerciseTab(section, part) {
            const container = document.getElementById(section).querySelector('.exercise-content');
            container.querySelectorAll('.exercise-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            container.querySelectorAll('.exercise-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`${section}-${part}`).classList.add('active');
            container.querySelector(`[onclick="switchExerciseTab('${section}', '${part}')"]`).classList.add('active');
        }

        function switchAllExercisesTab(section) {
            document.querySelectorAll('#exercises .exercise-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#exercises .exercise-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`all-${section}`).classList.add('active');
            document.querySelector(`#exercises [onclick="switchAllExercisesTab('${section}')"]`).classList.add('active');
        }

        // Submission system
        function submitExercise(exerciseId) {
            const submissionArea = event.target.closest('.submission-area');
            const answerInput = submissionArea.querySelector('.answer-input');
            const feedbackDiv = submissionArea.querySelector('.submission-feedback');
            const answer = answerInput.value.trim();
            
            if (!answer) {
                feedbackDiv.textContent = 'Please enter an answer before submitting.';
                feedbackDiv.className = 'submission-feedback error';
                return;
            }
            
            // Save submission
            submissions[exerciseId] = {
                answer: answer,
                date: new Date().toISOString(),
                section: exerciseId.split('.')[0]
            };
            
            localStorage.setItem('setsTheorySubmissions', JSON.stringify(submissions));
            
            // Update progress
            updateProgress();
            
            // Show success message
            feedbackDiv.textContent = 'Answer submitted successfully!';
            feedbackDiv.className = 'submission-feedback success';
            
            // Clear input after a delay
            setTimeout(() => {
                answerInput.value = '';
                feedbackDiv.textContent = '';
                feedbackDiv.className = 'submission-feedback';
            }, 3000);
        }

        function showExerciseHint(exerciseId) {
            const hints = {
                '1.1A.1': 'Try plugging in some integer values for x: x = -2, -1, 0, 1, 2, etc.',
                '1.2A.1': 'Remember: A × B = {(a, b) : a ∈ A, b ∈ B}. List all possible pairs.',
                // Add more hints as needed
            };
            
            alert(hints[exerciseId] || 'No hint available for this exercise.');
        }

        // Progress tracking
        function updateProgress() {
            // Calculate overall progress
            const totalExercises = 150; // Approximate total exercises in the chapter
            const completedExercises = Object.keys(submissions).length;
            const overallPercent = Math.min(100, Math.round((completedExercises / totalExercises) * 100));
            
            // Update progress bars
            document.getElementById('overall-progress').style.width = `${overallPercent}%`;
            document.getElementById('progress-text').textContent = `Progress: ${overallPercent}%`;
            
            document.getElementById('exercises-progress').style.width = `${overallPercent}%`;
            document.getElementById('exercises-progress-text').textContent = `Exercise Completion: ${overallPercent}% (${completedExercises}/${totalExercises})`;
            
            document.getElementById('submissions-progress').style.width = `${overallPercent}%`;
            document.getElementById('submissions-progress-text').textContent = `Overall Progress: ${overallPercent}%`;
            
            // Update submissions table
            updateSubmissionsTable();
            
            // Save progress
            progress.lastUpdated = new Date().toISOString();
            progress.overallPercent = overallPercent;
            localStorage.setItem('setsTheoryProgress', JSON.stringify(progress));
        }

        function updateSubmissionsTable() {
            const tableBody = document.getElementById('submissions-table');
            
            if (Object.keys(submissions).length === 0) {
                tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">No submissions yet. Complete exercises to see them here.</td></tr>';
                return;
            }
            
            let tableHTML = '';
            Object.entries(submissions).forEach(([exerciseId, submission]) => {
                const date = new Date(submission.date);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                
                tableHTML += `
                    <tr>
                        <td>${exerciseId}</td>
                        <td>${submission.answer.length > 50 ? submission.answer.substring(0, 50) + '...' : submission.answer}</td>
                        <td><span style="color: green;">Submitted</span></td>
                        <td>${formattedDate}</td>
                        <td>
                            <button class="control-btn" style="padding: 3px 8px; font-size: 0.8rem;" onclick="viewSubmission('${exerciseId}')">View</button>
                            <button class="control-btn accent" style="padding: 3px 8px; font-size: 0.8rem;" onclick="deleteSubmission('${exerciseId}')">Delete</button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = tableHTML;
        }

        function viewSubmission(exerciseId) {
            const submission = submissions[exerciseId];
            alert(`Exercise: ${exerciseId}\nAnswer: ${submission.answer}\nSubmitted: ${new Date(submission.date).toLocaleString()}`);
        }

        function deleteSubmission(exerciseId) {
            if (confirm(`Are you sure you want to delete your submission for ${exerciseId}?`)) {
                delete submissions[exerciseId];
                localStorage.setItem('setsTheorySubmissions', JSON.stringify(submissions));
                updateProgress();
            }
        }

        function clearAllSubmissions() {
            if (confirm('Are you sure you want to clear all submissions? This cannot be undone.')) {
                submissions = {};
                localStorage.setItem('setsTheorySubmissions', JSON.stringify(submissions));
                updateProgress();
            }
        }

        function exportSubmissions() {
            const dataStr = JSON.stringify(submissions, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'sets-theory-submissions.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function importSubmissions() {
            document.getElementById('import-file').click();
        }

        document.getElementById('import-file').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedSubmissions = JSON.parse(e.target.result);
                    submissions = { ...submissions, ...importedSubmissions };
                    localStorage.setItem('setsTheorySubmissions', JSON.stringify(submissions));
                    updateProgress();
                    alert('Submissions imported successfully!');
                } catch (error) {
                    alert('Error importing submissions. Please make sure the file is valid JSON.');
                }
            };
            reader.readAsText(file);
        });

        // Interactive functions for Section 1.1
        function showSetExample() {
            const demo = document.getElementById('intro-demo');
            demo.innerHTML = `
                <h4>Set Example</h4>
                <p>Let's define a set <span class="set-notation">A = {2, 4, 6, 8}</span></p>
                <p>This set has 4 elements. We can check membership:</p>
                <ul>
                    <li>2 ∈ A: <span style="color: green;">True</span></li>
                    <li>5 ∈ A: <span style="color: red;">False</span></li>
                    <li>8 ∈ A: <span style="color: green;">True</span></li>
                </ul>
                <p>The cardinality (size) of A is |A| = 4.</p>
            `;
        }

        function animateCardinality() {
            const demo = document.getElementById('intro-demo');
            demo.innerHTML = `
                <h4>Cardinality Animation</h4>
                <p>Watch how the cardinality (size) of a set changes as we add elements:</p>
                <div id="cardinality-animation" style="margin: 10px 0;">
                    <p>Set: <span id="set-elements">{}</span></p>
                    <p>|Set| = <span id="set-size">0</span></p>
                </div>
                <button class="control-btn" onclick="addElement()" style="margin-top: 10px;">
                    Add Element
                </button>
            `;
            
            window.animationSet = new Set();
            updateAnimationDisplay();
        }

        function addElement() {
            if (!window.animationSet) return;
            
            // Add a random element
            const elements = ['a', 'b', 'c', 'd', 'e', 1, 2, 3, 4, 5];
            const newElement = elements[Math.floor(Math.random() * elements.length)];
            window.animationSet.add(newElement);
            
            updateAnimationDisplay();
        }

        function updateAnimationDisplay() {
            const elementsDiv = document.getElementById('set-elements');
            const sizeDiv = document.getElementById('set-size');
            
            if (elementsDiv && sizeDiv && window.animationSet) {
                const elementsArray = Array.from(window.animationSet);
                elementsDiv.textContent = `{${elementsArray.join(', ')}}`;
                sizeDiv.textContent = window.animationSet.size;
            }
        }

        function resetIntro() {
            document.getElementById('intro-demo').innerHTML = 
                `<p>Click the buttons above to see interactive examples.</p>`;
        }

        function showSetBuilderExample(type) {
            const demo = document.getElementById('set-builder-demo');
            let expression, result;
            
            switch(type) {
                case 1: // Even integers
                    expression = `E = \\{2n : n \\in \\mathbb{Z}\\}`;
                    result = `\\{\\ldots, -4, -2, 0, 2, 4, \\ldots\\}`;
                    break;
                case 2: // Squares
                    expression = `S = \\{n^2 : n \\in \\mathbb{Z}\\}`;
                    result = `\\{0, 1, 4, 9, 16, 25, \\ldots\\}`;
                    break;
                case 3: // Primes
                    expression = `P = \\{n \\in \\mathbb{N} : n \\text{ is prime}\\}`;
                    result = `\\{2, 3, 5, 7, 11, 13, 17, \\ldots\\}`;
                    break;
            }
            
            demo.innerHTML = `${expression} = ${result}`;
            
            // Update MathJax rendering
            if (window.MathJax) {
                MathJax.typeset([demo]);
            }
        }

        function checkIntegerCombination() {
            const n = parseInt(document.getElementById('int-n').value);
            if (isNaN(n)) return;
            
            // Find a and b such that 7a + 3b = n
            // One solution: a = n, b = -2n (as in the example)
            const a = n;
            const b = -2 * n;
            
            document.getElementById('int-combination-result').innerHTML = `
                <p>For n = ${n}:</p>
                <p>Let a = ${a}, b = ${b}</p>
                <p>Then 7a + 3b = 7(${a}) + 3(${b}) = ${7*a} + ${3*b} = ${7*a + 3*b}</p>
                <p>Since ${7*a + 3*b} = ${n}, we have shown that ${n} ∈ A.</p>
                <p>This works for any integer n, so A = ℤ.</p>
            `;
        }

        // Interactive functions for Section 1.2
        function drawCartesianPlane() {
            const trace = {
                x: [],
                y: [],
                mode: 'markers',
                type: 'scatter',
                name: 'ℝ × ℝ',
                marker: { size: 2, color: 'blue' }
            };
            
            // Generate random points in ℝ × ℝ
            for (let i = 0; i < 100; i++) {
                trace.x.push((Math.random() - 0.5) * 10);
                trace.y.push((Math.random() - 0.5) * 10);
            }
            
            const layout = {
                title: 'ℝ × ℝ (Cartesian Plane)',
                xaxis: { title: 'x', range: [-5, 5] },
                yaxis: { title: 'y', range: [-5, 5] },
                showlegend: true
            };
            
            Plotly.newPlot('cartesian-graph', [trace], layout);
        }

        function drawRNatural() {
            const traces = [];
            
            // Draw horizontal lines at integer y-values
            for (let y = 1; y <= 5; y++) {
                traces.push({
                    x: [-5, 5],
                    y: [y, y],
                    mode: 'lines',
                    type: 'scatter',
                    name: `y = ${y}`,
                    line: { color: 'blue' }
                });
            }
            
            const layout = {
                title: 'ℝ × ℕ (Horizontal lines at integer heights)',
                xaxis: { title: 'x', range: [-5, 5] },
                yaxis: { title: 'y', range: [0, 6] },
                showlegend: false
            };
            
            Plotly.newPlot('cartesian-graph', traces, layout);
        }

        function drawNNatural() {
            const trace = {
                x: [],
                y: [],
                mode: 'markers',
                type: 'scatter',
                name: 'ℕ × ℕ',
                marker: { size: 8, color: 'red' }
            };
            
            // Generate points in ℕ × ℕ
            for (let x = 1; x <= 5; x++) {
                for (let y = 1; y <= 5; y++) {
                    trace.x.push(x);
                    trace.y.push(y);
                }
            }
            
            const layout = {
                title: 'ℕ × ℕ (Grid of natural number points)',
                xaxis: { title: 'x', range: [0, 6] },
                yaxis: { title: 'y', range: [0, 6] },
                showlegend: true
            };
            
            Plotly.newPlot('cartesian-graph', [trace], layout);
        }

        function simulateCoinTosses() {
            const n = parseInt(document.getElementById('num-tosses').value) || 3;
            const outcomes = [];
            
            for (let i = 0; i < n; i++) {
                outcomes.push(Math.random() < 0.5 ? 'H' : 'T');
            }
            
            document.getElementById('coin-toss-result').innerHTML = `
                <p><strong>Outcome:</strong> (${outcomes.join(', ')}) ∈ S<sup>${n}</sup></p>
                <p>This is one of the ${Math.pow(2, n)} possible outcomes.</p>
                <p>Interpretation: ${outcomes.map((outcome, i) => `Toss ${i+1}: ${outcome === 'H' ? 'Heads' : 'Tails'}`).join(', ')}</p>
            `;
        }

        function calculatePossibleOutcomes() {
            const n = parseInt(document.getElementById('num-tosses').value) || 3;
            const total = Math.pow(2, n);
            
            document.getElementById('coin-toss-result').innerHTML = `
                <p>For n = ${n} coin tosses:</p>
                <p>|S| = 2 (H or T)</p>
                <p>|S<sup>${n}</sup>| = |S|<sup>${n}</sup> = 2<sup>${n}</sup> = ${total}</p>
                <p>There are ${total} possible outcomes.</p>
            `;
        }

        function showR3Space() {
            const trace = {
                x: [0, 1, 0, 0],
                y: [0, 0, 1, 0],
                z: [0, 0, 0, 1],
                mode: 'markers',
                type: 'scatter3d',
                marker: { size: 5, color: ['red', 'green', 'blue', 'purple'] }
            };
            
            const layout = {
                title: 'ℝ³ (3D Space)',
                scene: {
                    xaxis: { title: 'x', range: [-1, 2] },
                    yaxis: { title: 'y', range: [-1, 2] },
                    zaxis: { title: 'z', range: [-1, 2] }
                }
            };
            
            Plotly.newPlot('3d-graph', [trace], layout);
        }

        function showZ3Grid() {
            const trace = {
                x: [],
                y: [],
                z: [],
                mode: 'markers',
                type: 'scatter3d',
                marker: { size: 3, color: 'blue' }
            };
            
            // Generate points in ℤ³
            for (let x = -2; x <= 2; x++) {
                for (let y = -2; y <= 2; y++) {
                    for (let z = -2; z <= 2; z++) {
                        trace.x.push(x);
                        trace.y.push(y);
                        trace.z.push(z);
                    }
                }
            }
            
            const layout = {
                title: 'ℤ³ (Grid of integer points in 3D)',
                scene: {
                    xaxis: { title: 'x', range: [-3, 3] },
                    yaxis: { title: 'y', range: [-3, 3] },
                    zaxis: { title: 'z', range: [-3, 3] }
                }
            };
            
            Plotly.newPlot('3d-graph', [trace], layout);
        }

        function showPointInR3() {
            const trace = {
                x: [1.5],
                y: [2.3],
                z: [0.7],
                mode: 'markers',
                type: 'scatter3d',
                marker: { size: 10, color: 'red' }
            };
            
            const layout = {
                title: 'Point (1.5, 2.3, 0.7) in ℝ³',
                scene: {
                    xaxis: { title: 'x', range: [0, 3] },
                    yaxis: { title: 'y', range: [0, 3] },
                    zaxis: { title: 'z', range: [0, 3] }
                }
            };
            
            Plotly.newPlot('3d-graph', [trace], layout);
        }

        // Interactive functions for Section 1.3
        function checkSubset() {
            const setAStr = document.getElementById('subsetAInput').value;
            const setBStr = document.getElementById('subsetBInput').value;
            
            try {
                const setA = parseSet(setAStr);
                const setB = parseSet(setBStr);
                
                let isSubset = true;
                const missingElements = [];
                
                for (const element of setA) {
                    if (!setB.has(element)) {
                        isSubset = false;
                        missingElements.push(element);
                    }
                }
                
                let resultHTML = `<p><strong>A =</strong> {${Array.from(setA).join(', ')}}</p>`;
                resultHTML += `<p><strong>B =</strong> {${Array.from(setB).join(', ')}}</p>`;
                
                if (isSubset) {
                    resultHTML += `<p style="color: green;"><strong>A ⊆ B is TRUE</strong></p>`;
                    if (setA.size === setB.size) {
                        resultHTML += `<p>A is also equal to B (A = B)</p>`;
                    }
                } else {
                    resultHTML += `<p style="color: red;"><strong>A ⊆ B is FALSE</strong></p>`;
                    resultHTML += `<p>Elements in A but not in B: {${missingElements.join(', ')}}</p>`;
                }
                
                document.getElementById('subset-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('subset-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function checkProperSubset() {
            const setAStr = document.getElementById('subsetAInput').value;
            const setBStr = document.getElementById('subsetBInput').value;
            
            try {
                const setA = parseSet(setAStr);
                const setB = parseSet(setBStr);
                
                let isSubset = true;
                const missingElements = [];
                
                for (const element of setA) {
                    if (!setB.has(element)) {
                        isSubset = false;
                        missingElements.push(element);
                    }
                }
                
                const isProper = isSubset && setA.size < setB.size;
                
                let resultHTML = `<p><strong>A =</strong> {${Array.from(setA).join(', ')}}</p>`;
                resultHTML += `<p><strong>B =</strong> {${Array.from(setB).join(', ')}}</p>`;
                
                if (isProper) {
                    resultHTML += `<p style="color: green;"><strong>A ⊂ B is TRUE (A is a proper subset of B)</strong></p>`;
                } else if (isSubset && setA.size === setB.size) {
                    resultHTML += `<p style="color: orange;"><strong>A ⊆ B is TRUE but A ⊂ B is FALSE</strong></p>`;
                    resultHTML += `<p>A = B (they are equal, so A is not a proper subset)</p>`;
                } else {
                    resultHTML += `<p style="color: red;"><strong>A ⊂ B is FALSE</strong></p>`;
                    if (missingElements.length > 0) {
                        resultHTML += `<p>Elements in A but not in B: {${missingElements.join(', ')}}</p>`;
                    }
                }
                
                document.getElementById('subset-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('subset-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function generateSubsets() {
            const setStr = document.getElementById('subsetGenInput').value;
            
            try {
                const set = parseSet(setStr);
                const elements = Array.from(set);
                const n = elements.length;
                const totalSubsets = Math.pow(2, n);
                
                // Generate all subsets using binary representation
                const subsets = [];
                for (let i = 0; i < totalSubsets; i++) {
                    const subset = [];
                    for (let j = 0; j < n; j++) {
                        if (i & (1 << j)) {
                            subset.push(elements[j]);
                        }
                    }
                    subsets.push(`{${subset.join(', ')}}`);
                }
                
                // Sort subsets by length
                subsets.sort((a, b) => {
                    const aCount = (a.match(/,/g) || []).length + (a === '{}' ? 0 : 1);
                    const bCount = (b.match(/,/g) || []).length + (b === '{}' ? 0 : 1);
                    return aCount - bCount || a.localeCompare(b);
                });
                
                let resultHTML = `<p><strong>Original set:</strong> {${elements.join(', ')}} has ${n} elements</p>`;
                resultHTML += `<p><strong>Number of subsets:</strong> 2<sup>${n}</sup> = ${totalSubsets}</p>`;
                resultHTML += `<p><strong>All subsets:</strong><br>`;
                resultHTML += `<div style="max-height: 200px; overflow-y: auto; border: 1px solid #eee; padding: 10px; margin-top: 10px;">`;
                resultHTML += subsets.join(', ');
                resultHTML += `</div></p>`;
                
                document.getElementById('subset-list').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('subset-list').innerHTML = 
                    `<p style="color: red;">Error parsing set. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        // Interactive functions for Section 1.4
        function calculatePowerSet() {
            const setStr = document.getElementById('powerSetInput').value;
            
            try {
                const set = parseSet(setStr);
                const elements = Array.from(set);
                const n = elements.length;
                const totalSubsets = Math.pow(2, n);
                
                // Generate all subsets
                const subsets = [];
                for (let i = 0; i < totalSubsets; i++) {
                    const subset = [];
                    for (let j = 0; j < n; j++) {
                        if (i & (1 << j)) {
                            subset.push(elements[j]);
                        }
                    }
                    subsets.push(`{${subset.join(', ')}}`);
                }
                
                // Sort by length
                subsets.sort((a, b) => {
                    const aCount = (a.match(/,/g) || []).length + (a === '{}' ? 0 : 1);
                    const bCount = (b.match(/,/g) || []).length + (b === '{}' ? 0 : 1);
                    return aCount - bCount || a.localeCompare(b);
                });
                
                let resultHTML = `<p><strong>Original set A:</strong> {${elements.join(', ')}}</p>`;
                resultHTML += `<p><strong>|A| =</strong> ${n}</p>`;
                resultHTML += `<p><strong>|𝒫(A)| =</strong> 2<sup>${n}</sup> = ${totalSubsets}</p>`;
                resultHTML += `<p><strong>Power set 𝒫(A):</strong><br>`;
                resultHTML += `<div style="max-height: 200px; overflow-y: auto; border: 1px solid #eee; padding: 10px; margin-top: 10px;">`;
                resultHTML += `{${subsets.join(', ')}}`;
                resultHTML += `</div></p>`;
                
                document.getElementById('power-set-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('power-set-result').innerHTML = 
                    `<p style="color: red;">Error parsing set. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function plotPowerSetGrowth() {
            const maxN = parseInt(document.getElementById('powerSetRange').value);
            
            const x = [];
            const y = [];
            
            for (let n = 0; n <= maxN; n++) {
                x.push(n);
                y.push(Math.pow(2, n));
            }
            
            const trace = {
                x: x,
                y: y,
                mode: 'lines+markers',
                type: 'scatter',
                name: '|𝒫(A)| = 2<sup>n</sup>',
                line: { color: 'blue' },
                marker: { size: 8 }
            };
            
            const layout = {
                title: 'Exponential Growth of Power Set Cardinality',
                xaxis: { title: '|A| = n' },
                yaxis: { title: '|𝒫(A)| = 2<sup>n</sup>', type: 'log' },
                showlegend: true
            };
            
            Plotly.newPlot('power-set-growth-graph', [trace], layout);
        }

        // Update the range value display
        document.getElementById('powerSetRange').addEventListener('input', function() {
            document.getElementById('powerSetValue').textContent = this.value;
        });

        // Interactive functions for Section 1.5
        function calculateUnion() {
            performSetOperation('union');
        }

        function calculateIntersection() {
            performSetOperation('intersection');
        }

        function calculateDifferenceAB() {
            performSetOperation('differenceAB');
        }

        function calculateDifferenceBA() {
            performSetOperation('differenceBA');
        }

        function calculateSymmetricDifference() {
            const setAStr = document.getElementById('setAOps').value;
            const setBStr = document.getElementById('setBOps').value;
            
            try {
                const setA = parseSet(setAStr);
                const setB = parseSet(setBStr);
                
                // Symmetric difference: (A - B) ∪ (B - A)
                const aMinusB = new Set([...setA].filter(x => !setB.has(x)));
                const bMinusA = new Set([...setB].filter(x => !setA.has(x)));
                const symmetricDiff = new Set([...aMinusB, ...bMinusA]);
                
                displaySetOperationResult(
                    'Symmetric Difference A Δ B',
                    setA, setB, symmetricDiff,
                    `(${Array.from(aMinusB).join(', ')}) ∪ (${Array.from(bMinusA).join(', ')})`
                );
            } catch (e) {
                document.getElementById('set-ops-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function performSetOperation(operation) {
            const setAStr = document.getElementById('setAOps').value;
            const setBStr = document.getElementById('setBOps').value;
            
            try {
                const setA = parseSet(setAStr);
                const setB = parseSet(setBStr);
                let resultSet, operationName, formula;
                
                switch(operation) {
                    case 'union':
                        resultSet = new Set([...setA, ...setB]);
                        operationName = 'Union A ∪ B';
                        formula = `${Array.from(setA).join(', ')} ∪ ${Array.from(setB).join(', ')}`;
                        break;
                    case 'intersection':
                        resultSet = new Set([...setA].filter(x => setB.has(x)));
                        operationName = 'Intersection A ∩ B';
                        formula = `${Array.from(setA).join(', ')} ∩ ${Array.from(setB).join(', ')}`;
                        break;
                    case 'differenceAB':
                        resultSet = new Set([...setA].filter(x => !setB.has(x)));
                        operationName = 'Difference A - B';
                        formula = `${Array.from(setA).join(', ')} - ${Array.from(setB).join(', ')}`;
                        break;
                    case 'differenceBA':
                        resultSet = new Set([...setB].filter(x => !setA.has(x)));
                        operationName = 'Difference B - A';
                        formula = `${Array.from(setB).join(', ')} - ${Array.from(setA).join(', ')}`;
                        break;
                }
                
                displaySetOperationResult(operationName, setA, setB, resultSet, formula);
            } catch (e) {
                document.getElementById('set-ops-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function displaySetOperationResult(operationName, setA, setB, resultSet, formula) {
            let resultHTML = `<p><strong>A =</strong> {${Array.from(setA).join(', ')}}</p>`;
            resultHTML += `<p><strong>B =</strong> {${Array.from(setB).join(', ')}}</p>`;
            resultHTML += `<p><strong>${operationName} =</strong> {${Array.from(resultSet).join(', ')}}</p>`;
            resultHTML += `<p><strong>Formula:</strong> ${formula}</p>`;
            resultHTML += `<p><strong>Cardinality:</strong> |${operationName}| = ${resultSet.size}</p>`;
            
            document.getElementById('set-ops-result').innerHTML = resultHTML;
        }

        function plotExample19(operation) {
            // Generate points for the parabola y = x²
            const xValues = [];
            const yParabola = [];
            for (let x = -3; x <= 3; x += 0.1) {
                xValues.push(x);
                yParabola.push(x * x);
            }
            
            // Generate points for the line y = x + 2
            const yLine = xValues.map(x => x + 2);
            
            let traces = [];
            
            if (operation === 'A' || operation === 'union' || operation === 'difference') {
                traces.push({
                    x: xValues,
                    y: yParabola,
                    mode: 'lines',
                    type: 'scatter',
                    name: 'A: y = x²',
                    line: { color: 'blue' }
                });
            }
            
            if (operation === 'B' || operation === 'union' || operation === 'difference') {
                traces.push({
                    x: xValues,
                    y: yLine,
                    mode: 'lines',
                    type: 'scatter',
                    name: 'B: y = x + 2',
                    line: { color: 'red' }
                });
            }
            
            if (operation === 'intersection') {
                // Show intersection points
                traces.push({
                    x: [-1, 2],
                    y: [1, 4],
                    mode: 'markers',
                    type: 'scatter',
                    name: 'A ∩ B = {(-1,1), (2,4)}',
                    marker: { size: 10, color: 'green' }
                });
                
                // Also show the curves
                traces.push({
                    x: xValues,
                    y: yParabola,
                    mode: 'lines',
                    type: 'scatter',
                    name: 'A: y = x²',
                    line: { color: 'blue', opacity: 0.3 }
                });
                
                traces.push({
                    x: xValues,
                    y: yLine,
                    mode: 'lines',
                    type: 'scatter',
                    name: 'B: y = x + 2',
                    line: { color: 'red', opacity: 0.3 }
                });
            }
            
            const layout = {
                title: `Example 1.9: ${operation === 'A' ? 'Set A (parabola)' : operation === 'B' ? 'Set B (line)' : operation === 'union' ? 'A ∪ B' : operation === 'intersection' ? 'A ∩ B' : 'A - B'}`,
                xaxis: { title: 'x', range: [-3, 3] },
                yaxis: { title: 'y', range: [-1, 9] },
                showlegend: true
            };
            
            Plotly.newPlot('example19-graph', traces, layout);
        }

        // Interactive functions for Section 1.6
        function calculateComplement() {
            const universalStr = document.getElementById('universalSet').value;
            const setAStr = document.getElementById('setAComplement').value;
            
            try {
                const universalSet = parseSet(universalStr);
                const setA = parseSet(setAStr);
                
                // Check that A is a subset of U
                let isSubset = true;
                const notInUniversal = [];
                for (const element of setA) {
                    if (!universalSet.has(element)) {
                        isSubset = false;
                        notInUniversal.push(element);
                    }
                }
                
                if (!isSubset) {
                    document.getElementById('complement-result').innerHTML = 
                        `<p style="color: red;">Error: A is not a subset of U.</p>
                         <p>These elements are in A but not in U: {${notInUniversal.join(', ')}}</p>`;
                    return;
                }
                
                // Calculate complement
                const complement = new Set([...universalSet].filter(x => !setA.has(x)));
                
                let resultHTML = `<p><strong>Universal set U =</strong> {${Array.from(universalSet).join(', ')}}</p>`;
                resultHTML += `<p><strong>Set A =</strong> {${Array.from(setA).join(', ')}}</p>`;
                resultHTML += `<p><strong>Complement of A (Ā or A<sup>c</sup>) =</strong> {${Array.from(complement).join(', ')}}</p>`;
                resultHTML += `<p><strong>Note:</strong> A ∪ Ā = U and A ∩ Ā = ∅</p>`;
                
                document.getElementById('complement-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('complement-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like {1, 2, 3} or {a, b, c}</p>`;
            }
        }

        function plotExample111(operation) {
            // Generate points for the parabola y = x²
            const xValues = [];
            const yParabola = [];
            for (let x = -3; x <= 3; x += 0.1) {
                xValues.push(x);
                yParabola.push(x * x);
            }
            
            let traces = [];
            
            if (operation === 'A' || operation === 'both') {
                traces.push({
                    x: xValues,
                    y: yParabola,
                    mode: 'lines',
                    type: 'scatter',
                    name: 'A: y = x²',
                    line: { color: 'blue' }
                });
            }
            
            if (operation === 'complement' || operation === 'both') {
                // For the complement, we need to show points NOT on the parabola
                // We'll create a grid of points and highlight those not on the parabola
                const gridX = [];
                const gridY = [];
                const colors = [];
                
                for (let x = -3; x <= 3; x += 0.3) {
                    for (let y = -1; y <= 9; y += 0.3) {
                        // Check if point is not on the parabola (within some tolerance)
                        if (Math.abs(y - x*x) > 0.2) {
                            gridX.push(x);
                            gridY.push(y);
                            // Color based on distance from parabola
                            const distance = Math.abs(y - x*x);
                            colors.push(distance);
                        }
                    }
                }
                
                traces.push({
                    x: gridX,
                    y: gridY,
                    mode: 'markers',
                    type: 'scatter',
                    name: 'Complement of A',
                    marker: {
                        size: 3,
                        color: colors,
                        colorscale: 'Viridis',
                        showscale: false,
                        opacity: 0.5
                    }
                });
            }
            
            const layout = {
                title: `Example 1.11: ${operation === 'A' ? 'Set A (parabola)' : operation === 'complement' ? 'Complement of A' : 'A and its complement'}`,
                xaxis: { title: 'x', range: [-3, 3] },
                yaxis: { title: 'y', range: [-1, 9] },
                showlegend: true
            };
            
            Plotly.newPlot('example111-graph', traces, layout);
        }

        // Interactive functions for Section 1.7 (Venn Diagrams)
        let vennCanvas, vennCtx;
        
        function initializeVennDiagram() {
            vennCanvas = document.getElementById('vennCanvas');
            vennCtx = vennCanvas.getContext('2d');
            drawVennDiagram();
        }
        
        function drawVennDiagram() {
            if (!vennCtx) return;
            
            const width = vennCanvas.width;
            const height = vennCanvas.height;
            
            // Clear canvas
            vennCtx.clearRect(0, 0, width, height);
            
            // Draw two circles for sets A and B
            const centerAX = width * 0.4;
            const centerBX = width * 0.6;
            const centerY = height * 0.5;
            const radius = 80;
            
            // Set A circle (blue)
            vennCtx.beginPath();
            vennCtx.arc(centerAX, centerY, radius, 0, Math.PI * 2);
            vennCtx.fillStyle = 'rgba(52, 152, 219, 0.3)';
            vennCtx.fill();
            vennCtx.strokeStyle = '#2980b9';
            vennCtx.lineWidth = 2;
            vennCtx.stroke();
            
            // Set B circle (red)
            vennCtx.beginPath();
            vennCtx.arc(centerBX, centerY, radius, 0, Math.PI * 2);
            vennCtx.fillStyle = 'rgba(231, 76, 60, 0.3)';
            vennCtx.fill();
            vennCtx.strokeStyle = '#c0392b';
            vennCtx.lineWidth = 2;
            vennCtx.stroke();
            
            // Labels
            vennCtx.fillStyle = '#2c3e50';
            vennCtx.font = 'bold 16px Arial';
            vennCtx.textAlign = 'center';
            vennCtx.fillText('A', centerAX - radius/2, centerY - radius - 10);
            vennCtx.fillText('B', centerBX + radius/2, centerY - radius - 10);
            
            // Universal set boundary
            vennCtx.beginPath();
            vennCtx.rect(10, 10, width - 20, height - 20);
            vennCtx.strokeStyle = '#7f8c8d';
            vennCtx.setLineDash([5, 5]);
            vennCtx.lineWidth = 1;
            vennCtx.stroke();
            vennCtx.setLineDash([]);
            
            vennCtx.fillText('U', width - 20, 25);
        }
        
        function showVennRegion(region) {
            if (!vennCtx) initializeVennDiagram();
            drawVennDiagram();
            
            const width = vennCanvas.width;
            const height = vennCanvas.height;
            const centerAX = width * 0.4;
            const centerBX = width * 0.6;
            const centerY = height * 0.5;
            const radius = 80;
            
            // Highlight selected region
            vennCtx.globalCompositeOperation = 'source-over';
            
            switch(region) {
                case 'union':
                    // Highlight both circles
                    vennCtx.beginPath();
                    vennCtx.arc(centerAX, centerY, radius, 0, Math.PI * 2);
                    vennCtx.arc(centerBX, centerY, radius, 0, Math.PI * 2);
                    vennCtx.fillStyle = 'rgba(46, 204, 113, 0.5)';
                    vennCtx.fill();
                    
                    document.getElementById('venn-explanation').innerHTML = `
                        <p><strong>A ∪ B (Union):</strong> All elements that are in A OR in B (or both).</p>
                        <p>This includes elements in only A, only B, and in both A and B.</p>
                    `;
                    break;
                    
                case 'intersection':
                    // Highlight intersection
                    vennCtx.beginPath();
                    vennCtx.arc(centerAX, centerY, radius, -Math.PI/4, Math.PI/4);
                    vennCtx.arc(centerBX, centerY, radius, Math.PI*3/4, Math.PI*5/4, true);
                    vennCtx.fillStyle = 'rgba(46, 204, 113, 0.7)';
                    vennCtx.fill();
                    
                    document.getElementById('venn-explanation').innerHTML = `
                        <p><strong>A ∩ B (Intersection):</strong> All elements that are in BOTH A AND B.</p>
                        <p>This is the overlapping region of the two circles.</p>
                    `;
                    break;
                    
                case 'complement':
                    // Highlight complement of A (everything in U but not in A)
                    vennCtx.fillStyle = 'rgba(46, 204, 113, 0.5)';
                    vennCtx.fillRect(10, 10, width - 20, height - 20);
                    
                    // Then "punch out" set A
                    vennCtx.globalCompositeOperation = 'destination-out';
                    vennCtx.beginPath();
                    vennCtx.arc(centerAX, centerY, radius, 0, Math.PI * 2);
                    vennCtx.fill();
                    vennCtx.globalCompositeOperation = 'source-over';
                    
                    document.getElementById('venn-explanation').innerHTML = `
                        <p><strong>Ā (Complement of A):</strong> All elements in the universal set U that are NOT in A.</p>
                        <p>This includes elements in B that are not in A, and elements in neither A nor B.</p>
                    `;
                    break;
                    
                case 'difference':
                    // Highlight A - B (elements in A but not in B)
                    vennCtx.beginPath();
                    vennCtx.arc(centerAX, centerY, radius, Math.PI/4, Math.PI*7/4);
                    vennCtx.arc(centerBX, centerY, radius, Math.PI*5/4, Math.PI*3/4, true);
                    vennCtx.fillStyle = 'rgba(46, 204, 113, 0.7)';
                    vennCtx.fill();
                    
                    document.getElementById('venn-explanation').innerHTML = `
                        <p><strong>A - B (Difference):</strong> All elements that are in A but NOT in B.</p>
                        <p>This is the part of circle A that does not overlap with circle B.</p>
                    `;
                    break;
                    
                case 'symmetric':
                    // Highlight symmetric difference (A Δ B) = (A - B) ∪ (B - A)
                    // First A - B
                    vennCtx.beginPath();
                    vennCtx.arc(centerAX, centerY, radius, Math.PI/4, Math.PI*7/4);
                    vennCtx.arc(centerBX, centerY, radius, Math.PI*5/4, Math.PI*3/4, true);
                    vennCtx.fillStyle = 'rgba(46, 204, 113, 0.7)';
                    vennCtx.fill();
                    
                    // Then B - A
                    vennCtx.beginPath();
                    vennCtx.arc(centerBX, centerY, radius, -Math.PI/4, Math.PI*3/4);
                    vennCtx.arc(centerAX, centerY, radius, Math.PI*5/4, Math.PI/4, true);
                    vennCtx.fill();
                    
                    document.getElementById('venn-explanation').innerHTML = `
                        <p><strong>A Δ B (Symmetric Difference):</strong> All elements that are in A or B but NOT in both.</p>
                        <p>This is (A - B) ∪ (B - A) - the non-overlapping parts of both circles.</p>
                    `;
                    break;
            }
            
            // Redraw borders
            drawVennDiagram();
        }

        function showThreeVenn(expression) {
            const canvas = document.getElementById('threeVennCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const width = canvas.width;
            const height = canvas.height;
            
            // Draw three circles
            const centerAX = width * 0.4;
            const centerBX = width * 0.6;
            const centerCX = width * 0.5;
            const centerAY = height * 0.45;
            const centerBY = height * 0.45;
            const centerCY = height * 0.6;
            const radius = 70;
            
            // Draw circles
            ctx.beginPath();
            ctx.arc(centerAX, centerAY, radius, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(52, 152, 219, 0.3)';
            ctx.fill();
            ctx.strokeStyle = '#2980b9';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(centerBX, centerBY, radius, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(231, 76, 60, 0.3)';
            ctx.fill();
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(centerCX, centerCY, radius, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(46, 204, 113, 0.3)';
            ctx.fill();
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('A', centerAX - radius/2, centerAY - radius - 10);
            ctx.fillText('B', centerBX + radius/2, centerBY - radius - 10);
            ctx.fillText('C', centerCX, centerCY + radius + 20);
            
            // Universal set boundary
            ctx.beginPath();
            ctx.rect(10, 10, width - 20, height - 20);
            ctx.strokeStyle = '#7f8c8d';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 1;
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillText('U', width - 20, 25);
            
            // Highlight based on expression
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = 'rgba(255, 193, 7, 0.6)';
            
            switch(expression) {
                case 'A∪B∩C':
                    // Highlight (A ∪ B) ∩ C
                    // This is complicated - for simplicity, we'll just highlight the intersection area
                    ctx.beginPath();
                    // Intersection of all three
                    ctx.arc(centerAX, centerAY, radius, -Math.PI/6, Math.PI/6);
                    ctx.arc(centerBX, centerBY, radius, Math.PI*5/6, Math.PI*7/6, true);
                    ctx.arc(centerCX, centerCY, radius, Math.PI/2, Math.PI*3/2, true);
                    ctx.fill();
                    
                    document.getElementById('three-venn-explanation').innerHTML = `
                        <p><strong>(A ∪ B) ∩ C:</strong> Elements that are in C AND also in either A or B (or both).</p>
                        <p>This is the part of circle C that overlaps with A or B.</p>
                    `;
                    break;
                    
                case 'A∪(B∩C)':
                    // Highlight A ∪ (B ∩ C)
                    // For simplicity, highlight A and the intersection of B and C
                    ctx.beginPath();
                    // Circle A
                    ctx.arc(centerAX, centerAY, radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Intersection of B and C
                    ctx.beginPath();
                    ctx.arc(centerBX, centerBY, radius, -Math.PI/3, Math.PI/3);
                    ctx.arc(centerCX, centerCY, radius, Math.PI*2/3, Math.PI*4/3, true);
                    ctx.fill();
                    
                    document.getElementById('three-venn-explanation').innerHTML = `
                        <p><strong>A ∪ (B ∩ C):</strong> Elements that are in A OR in both B and C.</p>
                        <p>Note: (A ∪ B) ∩ C ≠ A ∪ (B ∩ C) in general.</p>
                    `;
                    break;
                    
                case 'A∩B∩C':
                    // Highlight intersection of all three
                    ctx.beginPath();
                    ctx.arc(centerAX, centerAY, radius, -Math.PI/6, Math.PI/6);
                    ctx.arc(centerBX, centerBY, radius, Math.PI*5/6, Math.PI*7/6, true);
                    ctx.arc(centerCX, centerCY, radius, Math.PI/2, Math.PI*3/2, true);
                    ctx.fill();
                    
                    document.getElementById('three-venn-explanation').innerHTML = `
                        <p><strong>A ∩ B ∩ C:</strong> Elements that are in ALL THREE sets A, B, and C.</p>
                        <p>This is the central region where all three circles overlap.</p>
                    `;
                    break;
                    
                case 'A∪B∪C':
                    // Highlight union of all three
                    ctx.beginPath();
                    ctx.arc(centerAX, centerAY, radius, 0, Math.PI * 2);
                    ctx.arc(centerBX, centerBY, radius, 0, Math.PI * 2);
                    ctx.arc(centerCX, centerCY, radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    document.getElementById('three-venn-explanation').innerHTML = `
                        <p><strong>A ∪ B ∪ C:</strong> Elements that are in A OR B OR C (or any combination).</p>
                        <p>This includes all areas within any of the three circles.</p>
                    `;
                    break;
            }
            
            // Redraw borders
            ctx.globalCompositeOperation = 'source-over';
            drawThreeVennBorders(ctx, centerAX, centerAY, centerBX, centerBY, centerCX, centerCY, radius);
        }

        function drawThreeVennBorders(ctx, ax, ay, bx, by, cx, cy, radius) {
            // Redraw circle borders
            ctx.beginPath();
            ctx.arc(ax, ay, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#2980b9';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(bx, by, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(cx, cy, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawOnCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // Enable drawing
            let isDrawing = false;
            
            canvas.addEventListener('mousedown', function(e) {
                isDrawing = true;
                ctx.beginPath();
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                ctx.moveTo(x, y);
            });
            
            canvas.addEventListener('mousemove', function(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                ctx.lineTo(x, y);
                ctx.stroke();
            });
            
            canvas.addEventListener('mouseup', function() {
                isDrawing = false;
            });
            
            // Set drawing style
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
        }

        function clearCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function clearGraph(graphId) {
            Plotly.purge(graphId);
            const container = document.getElementById(graphId);
            container.innerHTML = '';
        }

        // Interactive functions for Section 1.8
        function calculateIndexedUnion() {
            const set1Str = document.getElementById('indexedSet1').value;
            const set2Str = document.getElementById('indexedSet2').value;
            const set3Str = document.getElementById('indexedSet3').value;
            
            try {
                const sets = [];
                if (set1Str.trim()) sets.push(parseSet(`{${set1Str}}`));
                if (set2Str.trim()) sets.push(parseSet(`{${set2Str}}`));
                if (set3Str.trim()) sets.push(parseSet(`{${set3Str}}`));
                
                if (sets.length === 0) {
                    document.getElementById('indexed-result').innerHTML = 
                        `<p style="color: red;">Please enter at least one set.</p>`;
                    return;
                }
                
                // Calculate union
                const unionSet = new Set();
                for (const set of sets) {
                    for (const element of set) {
                        unionSet.add(element);
                    }
                }
                
                let resultHTML = `<p><strong>Sets:</strong></p>`;
                for (let i = 0; i < sets.length; i++) {
                    resultHTML += `<p>A<sub>${i+1}</sub> = {${Array.from(sets[i]).join(', ')}}</p>`;
                }
                resultHTML += `<p><strong>Union:</strong> ⋃<sub>i=1</sub><sup>${sets.length}</sup> A<sub>i</sub> = {${Array.from(unionSet).join(', ')}}</p>`;
                
                document.getElementById('indexed-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('indexed-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like "1, 2, 3" for each set.</p>`;
            }
        }

        function calculateIndexedIntersection() {
            const set1Str = document.getElementById('indexedSet1').value;
            const set2Str = document.getElementById('indexedSet2').value;
            const set3Str = document.getElementById('indexedSet3').value;
            
            try {
                const sets = [];
                if (set1Str.trim()) sets.push(parseSet(`{${set1Str}}`));
                if (set2Str.trim()) sets.push(parseSet(`{${set2Str}}`));
                if (set3Str.trim()) sets.push(parseSet(`{${set3Str}}`));
                
                if (sets.length === 0) {
                    document.getElementById('indexed-result').innerHTML = 
                        `<p style="color: red;">Please enter at least one set.</p>`;
                    return;
                }
                
                // Calculate intersection
                let intersectionSet = new Set(sets[0]);
                for (let i = 1; i < sets.length; i++) {
                    intersectionSet = new Set([...intersectionSet].filter(x => sets[i].has(x)));
                }
                
                let resultHTML = `<p><strong>Sets:</strong></p>`;
                for (let i = 0; i < sets.length; i++) {
                    resultHTML += `<p>A<sub>${i+1}</sub> = {${Array.from(sets[i]).join(', ')}}</p>`;
                }
                resultHTML += `<p><strong>Intersection:</strong> ⋂<sub>i=1</sub><sup>${sets.length}</sup> A<sub>i</sub> = {${Array.from(intersectionSet).join(', ')}}</p>`;
                
                document.getElementById('indexed-result').innerHTML = resultHTML;
            } catch (e) {
                document.getElementById('indexed-result').innerHTML = 
                    `<p style="color: red;">Error parsing sets. Use format like "1, 2, 3" for each set.</p>`;
            }
        }

        function showInfiniteIndexedSets() {
            let resultHTML = `<p><strong>First 10 sets A<sub>i</sub> = \{-i, 0, i\}:</strong></p>`;
            
            for (let i = 1; i <= 10; i++) {
                resultHTML += `<p>A<sub>${i}</sub> = {${-i}, 0, ${i}}</p>`;
            }
            
            resultHTML += `<p>⋃<sub>i=1</sub><sup>∞</sup> A<sub>i</sub> = ℤ (all integers)</p>`;
            resultHTML += `<p>⋂<sub>i=1</sub><sup>∞</sup> A<sub>i</sub> = {0}</p>`;
            
            document.getElementById('infinite-indexed-result').innerHTML = resultHTML;
        }

        function showInfiniteUnion() {
            document.getElementById('infinite-indexed-result').innerHTML = `
                <p><strong>Union of all A<sub>i</sub>:</strong></p>
                <p>⋃<sub>i=1</sub><sup>∞</sup> A<sub>i</sub> = A<sub>1</sub> ∪ A<sub>2</sub> ∪ A<sub>3</sub> ∪ ...</p>
                <p>= \{-1, 0, 1\} ∪ \{-2, 0, 2\} ∪ \{-3, 0, 3\} ∪ ...</p>
                <p>= \{..., -3, -2, -1, 0, 1, 2, 3, ...\} = ℤ</p>
                <p>Every integer appears in some A<sub>i</sub> (specifically, in A<sub>|n|</sub>).</p>
            `;
        }

        function showInfiniteIntersection() {
            document.getElementById('infinite-indexed-result').innerHTML = `
                <p><strong>Intersection of all A<sub>i</sub>:</strong></p>
                <p>⋂<sub>i=1</sub><sup>∞</sup> A<sub>i</sub> = A<sub>1</sub> ∩ A<sub>2</sub> ∩ A<sub>3</sub> ∩ ...</p>
                <p>= \{-1, 0, 1\} ∩ \{-2, 0, 2\} ∩ \{-3, 0, 3\} ∩ ...</p>
                <p>= \{0\}</p>
                <p>Only 0 is in every set A<sub>i</sub>.</p>
            `;
        }

        function showIndexedRectangle() {
            const alpha = parseFloat(document.getElementById('alphaRange').value);
            
            const trace = {
                x: [alpha, alpha, 2, 2, alpha],
                y: [0, alpha, alpha, 0, 0],
                mode: 'lines',
                type: 'scatter',
                name: `A<sub>${alpha.toFixed(1)}</sub> = [${alpha.toFixed(1)}, 2] × [0, ${alpha.toFixed(1)}]`,
                fill: 'toself',
                fillcolor: 'rgba(52, 152, 219, 0.3)',
                line: { color: 'blue' }
            };
            
            const layout = {
                title: `Indexed Rectangle A<sub>${alpha.toFixed(1)}</sub>`,
                xaxis: { title: 'x', range: [0, 2.2] },
                yaxis: { title: 'y', range: [0, 2.2] },
                showlegend: true
            };
            
            Plotly.newPlot('indexed-rectangles-graph', [trace], layout);
        }

        function showIndexedUnion() {
            // Create multiple rectangles for different alpha values
            const traces = [];
            const alphas = [0, 0.2, 0.4, 0.6, 0.8, 1.0, 1.2, 1.4, 1.6, 1.8, 2.0];
            
            alphas.forEach(alpha => {
                traces.push({
                    x: [alpha, alpha, 2, 2, alpha],
                    y: [0, alpha, alpha, 0, 0],
                    mode: 'lines',
                    type: 'scatter',
                    name: `α = ${alpha}`,
                    line: { color: 'rgba(52, 152, 219, 0.3)', width: 1 },
                    showlegend: false
                });
            });
            
            // Add the triangle that represents the union
            traces.push({
                x: [0, 2, 2, 0],
                y: [0, 0, 2, 0],
                mode: 'lines',
                type: 'scatter',
                name: 'Union ⋃<sub>α∈[0,2]</sub> A<sub>α</sub>',
                fill: 'toself',
                fillcolor: 'rgba(46, 204, 113, 0.5)',
                line: { color: 'green', width: 2 }
            });
            
            const layout = {
                title: 'Union of All A<sub>α</sub> (Forms a Triangle)',
                xaxis: { title: 'x', range: [0, 2.2] },
                yaxis: { title: 'y', range: [0, 2.2] },
                showlegend: true
            };
            
            Plotly.newPlot('indexed-rectangles-graph', traces, layout);
        }

        function showIndexedIntersection() {
            // Show only the point (2, 0)
            const trace = {
                x: [2],
                y: [0],
                mode: 'markers',
                type: 'scatter',
                name: 'Intersection ⋂<sub>α∈[0,2]</sub> A<sub>α</sub> = {(2, 0)}',
                marker: { size: 12, color: 'red' }
            };
            
            const layout = {
                title: 'Intersection of All A<sub>α</sub> = {(2, 0)}',
                xaxis: { title: 'x', range: [0, 2.2] },
                yaxis: { title: 'y', range: [0, 2.2] },
                showlegend: true
            };
            
            Plotly.newPlot('indexed-rectangles-graph', [trace], layout);
        }

        // Update alpha value display
        document.getElementById('alphaRange').addEventListener('input', function() {
            document.getElementById('alphaValue').textContent = parseFloat(this.value).toFixed(1);
        });

        function showPlaneIn3D() {
            const a = parseFloat(document.getElementById('planeA').value);
            const b = parseFloat(document.getElementById('planeB').value);
            
            // Create a grid for the plane
            const x = [], y = [], z = [];
            
            for (let i = -2; i <= 2; i += 0.5) {
                for (let j = -2; j <= 2; j += 0.5) {
                    // For the equation ax + by = 0, we can express z as anything
                    // We'll create a plane at different z heights
                    for (let k = -1; k <= 1; k += 1) {
                        // Check if point satisfies ax + by = 0 (within tolerance)
                        if (Math.abs(a*i + b*j) < 0.1) {
                            x.push(i);
                            y.push(j);
                            z.push(k);
                        }
                    }
                }
            }
            
            const trace = {
                x: x,
                y: y,
                z: z,
                mode: 'markers',
                type: 'scatter3d',
                name: `P<sub>(${a},${b})</sub>: ${a}x + ${b}y = 0`,
                marker: { size: 3, color: 'blue' }
            };
            
            // Add z-axis
            const zAxis = {
                x: [0, 0],
                y: [0, 0],
                z: [-2, 2],
                mode: 'lines',
                type: 'scatter3d',
                name: 'z-axis',
                line: { color: 'red', width: 4 }
            };
            
            const layout = {
                title: `Plane P<sub>(${a},${b})</sub> in ℝ³`,
                scene: {
                    xaxis: { title: 'x', range: [-2, 2] },
                    yaxis: { title: 'y', range: [-2, 2] },
                    zaxis: { title: 'z', range: [-2, 2] }
                },
                showlegend: true
            };
            
            Plotly.newPlot('3d-planes-graph', [trace, zAxis], layout);
        }

        function showZAxis() {
            // Just show the z-axis
            const trace = {
                x: [0, 0],
                y: [0, 0],
                z: [-2, 2],
                mode: 'lines',
                type: 'scatter3d',
                name: 'z-axis',
                line: { color: 'red', width: 4 }
            };
            
            const layout = {
                title: 'z-axis (Intersection of all P<sub>(a,b)</sub>)',
                scene: {
                    xaxis: { title: 'x', range: [-2, 2] },
                    yaxis: { title: 'y', range: [-2, 2] },
                    zaxis: { title: 'z', range: [-2, 2] }
                },
                showlegend: true
            };
            
            Plotly.newPlot('3d-planes-graph', [trace], layout);
        }

        // Interactive functions for Section 1.9
        function showNumberHierarchy() {
            document.getElementById('number-system-info').innerHTML = `
                <h4>Number System Hierarchy</h4>
                <p>Number systems form a nested hierarchy:</p>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #2c3e50; margin: 10px;">
                        ℕ ⊂ ℤ ⊂ ℚ ⊂ ℝ
                    </div>
                </div>
                <ul>
                    <li><strong>ℕ (Natural numbers):</strong> {1, 2, 3, 4, 5, ...}</li>
                    <li><strong>ℤ (Integers):</strong> {..., -3, -2, -1, 0, 1, 2, 3, ...} = ℕ ∪ {0} ∪ {-n : n ∈ ℕ}</li>
                    <li><strong>ℚ (Rational numbers):</strong> {a/b : a, b ∈ ℤ, b ≠ 0} = all fractions</li>
                    <li><strong>ℝ (Real numbers):</strong> All numbers on the number line, including irrationals like √2 and π</li>
                </ul>
                <p>Each set is a proper subset of the next: ℕ ⊂ ℤ ⊂ ℚ ⊂ ℝ</p>
            `;
        }

        function showNumberExamples() {
            document.getElementById('number-system-info').innerHTML = `
                <h4>Examples of Numbers in Different Systems</h4>
                <table style="width: 100%; margin-top: 15px;">
                    <thead>
                        <tr>
                            <th>Number</th>
                            <th>In ℕ?</th>
                            <th>In ℤ?</th>
                            <th>In ℚ?</th>
                            <th>In ℝ?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>5</td>
                            <td>✓</td>
                            <td>✓</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td>✗</td>
                            <td>✓</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>-3</td>
                            <td>✗</td>
                            <td>✓</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>2/3</td>
                            <td>✗</td>
                            <td>✗</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>√2</td>
                            <td>✗</td>
                            <td>✗</td>
                            <td>✗</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>π</td>
                            <td>✗</td>
                            <td>✗</td>
                            <td>✗</td>
                            <td>✓</td>
                        </tr>
                    </tbody>
                </table>
                <p style="margin-top: 15px;"><strong>Note:</strong> ℚ ≠ ℝ because there are real numbers (like √2 and π) that are not rational.</p>
            `;
        }

        function calculateDivision() {
            const a = parseInt(document.getElementById('dividend').value);
            const b = parseInt(document.getElementById('divisor').value);
            
            if (isNaN(a) || isNaN(b) || b <= 0) {
                document.getElementById('division-result').innerHTML = 
                    `<p style="color: red;">Please enter valid integers with b > 0.</p>`;
                return;
            }
            
            const q = Math.floor(a / b);
            const r = a - q * b;
            
            document.getElementById('division-result').innerHTML = `
                <p><strong>Division Algorithm:</strong> For a = ${a}, b = ${b}</p>
                <p>We find q = ${q} and r = ${r} such that:</p>
                <div class="math" style="margin: 10px 0;">
                    ${a} = ${q} × ${b} + ${r}
                </div>
                <p>and 0 ≤ r < b (${r} < ${b})</p>
                <p><strong>Verification:</strong> ${q} × ${b} = ${q*b}, plus remainder ${r} = ${q*b + r} = ${a}</p>
            `;
            
            // Update MathJax rendering
            if (window.MathJax) {
                MathJax.typeset();
            }
        }

        function showNumberAsSet() {
            const n = parseInt(document.getElementById('numberAsSet').value);
            
            let setRepresentation = '';
            let explanation = '';
            
            switch(n) {
                case 0:
                    setRepresentation = '∅';
                    explanation = '0 is defined as the empty set.';
                    break;
                case 1:
                    setRepresentation = '{∅}';
                    explanation = '1 is defined as the set containing the empty set.';
                    break;
                case 2:
                    setRepresentation = '{∅, {∅}}';
                    explanation = '2 is defined as the set containing 0 and 1.';
                    break;
                case 3:
                    setRepresentation = '{∅, {∅}, {∅, {∅}}}';
                    explanation = '3 is defined as the set containing 0, 1, and 2.';
                    break;
                case 4:
                    setRepresentation = '{∅, {∅}, {∅, {∅}}, {∅, {∅}, {∅, {∅}}}}';
                    explanation = '4 is defined as the set containing 0, 1, 2, and 3.';
                    break;
            }
            
            document.getElementById('number-set-representation').innerHTML = `
                <p><strong>${n} as a set:</strong> ${setRepresentation}</p>
                <p>${explanation}</p>
                <p>In general: n = {0, 1, 2, ..., n-1}</p>
            `;
        }

        // Interactive functions for Section 1.10
        function showParadoxStep(step) {
            const explanationDiv = document.getElementById('paradox-explanation');
            
            switch(step) {
                case 1:
                    explanationDiv.innerHTML = `
                        <h4>Step 1: Define the Set A</h4>
                        <p>Let A be the set of all sets that do not contain themselves as elements:</p>
                        <div class="math">
                            A = \{X : X \text{ is a set and } X \notin X\}
                        </div>
                        <p>For example:</p>
                        <ul>
                            <li>The set of integers ℤ is not an integer, so ℤ ∉ ℤ, therefore ℤ ∈ A</li>
                            <li>The empty set ∅ is not ∅ (∅ is a set, not the empty set itself), so ∅ ∉ ∅, therefore ∅ ∈ A</li>
                        </ul>
                    `;
                    break;
                    
                case 2:
                    explanationDiv.innerHTML = `
                        <h4>Step 2: Assume A ∈ A</h4>
                        <p>Suppose A contains itself as an element: A ∈ A</p>
                        <p>By the definition of A, for any X ∈ A, we must have X ∉ X</p>
                        <p>So if A ∈ A, then by definition of A, we must have A ∉ A</p>
                        <div class="math">
                            A \in A \Rightarrow A \notin A
                        </div>
                        <p>This is a contradiction! We can't have both A ∈ A and A ∉ A.</p>
                    `;
                    break;
                    
                case 3:
                    explanationDiv.innerHTML = `
                        <h4>Step 3: Assume A ∉ A</h4>
                        <p>Now suppose A does not contain itself as an element: A ∉ A</p>
                        <p>By the definition of A, A contains all sets X that satisfy X ∉ X</p>
                        <p>Since A ∉ A, A satisfies the condition for belonging to A</p>
                        <p>Therefore, A ∈ A</p>
                        <div class="math">
                            A \notin A \Rightarrow A \in A
                        </div>
                        <p>This is also a contradiction! We can't have both A ∉ A and A ∈ A.</p>
                    `;
                    break;
                    
                case 4:
                    explanationDiv.innerHTML = `
                        <h4>Step 4: The Contradiction</h4>
                        <p>We have shown that:</p>
                        <div class="math">
                            A \in A \Rightarrow A \notin A \quad \text{and} \quad A \notin A \Rightarrow A \in A
                        </div>
                        <p>This means A ∈ A if and only if A ∉ A, which is a logical contradiction.</p>
                        <p><strong>The paradox:</strong> The set A both must and must not contain itself.</p>
                        <p>This shows that naive set theory (where any definable collection is a set) is inconsistent.</p>
                        <p>The resolution came with axiomatic set theory, which places restrictions on what can be a set.</p>
                    `;
                    break;
            }
            
            // Update MathJax rendering
            if (window.MathJax) {
                MathJax.typeset();
            }
        }

        function showBarberParadox(step) {
            const explanationDiv = document.getElementById('barber-paradox-explanation');
            
            switch(step) {
                case 1:
                    explanationDiv.innerHTML = `
                        <h4>Step 1: The Rule</h4>
                        <p>In a village, there is a barber who shaves all those and only those who do not shave themselves.</p>
                        <p>In other words:</p>
                        <ul>
                            <li>If a person does NOT shave themselves, the barber shaves them.</li>
                            <li>If a person DOES shave themselves, the barber does NOT shave them.</li>
                        </ul>
                    `;
                    break;
                    
                case 2:
                    explanationDiv.innerHTML = `
                        <h4>Step 2: Does the barber shave himself?</h4>
                        <p>Consider the barber himself:</p>
                        <ul>
                            <li>If the barber shaves himself, then by the rule he should NOT shave himself (since he shaves only those who don't shave themselves).</li>
                            <li>If the barber does NOT shave himself, then by the rule he SHOULD shave himself (since he shaves all those who don't shave themselves).</li>
                        </ul>
                    `;
                    break;
                    
                case 3:
                    explanationDiv.innerHTML = `
                        <h4>Step 3: The Contradiction</h4>
                        <p>We have a contradiction:</p>
                        <ul>
                            <li>If the barber shaves himself, then he shouldn't.</li>
                            <li>If the barber doesn't shave himself, then he should.</li>
                        </ul>
                        <p>This is analogous to Russell's paradox. The barber corresponds to the set A, and "shaves" corresponds to "is an element of".</p>
                        <p>The paradox shows that such a barber cannot exist, just as the set A cannot exist in naive set theory.</p>
                    `;
                    break;
            }
        }

        // Helper function to parse set strings like "{1, 2, 3}" or "{a, b, c}"
        function parseSet(setStr) {
            // Remove braces and trim
            let content = setStr.trim();
            if (content.startsWith('{') && content.endsWith('}')) {
                content = content.substring(1, content.length - 1).trim();
            }
            
            if (content === '') {
                return new Set(); // Empty set
            }
            
            // Split by commas and trim each element
            const elements = content.split(',').map(e => e.trim());
            
            // Convert numeric strings to numbers, keep others as strings
            const parsedElements = elements.map(e => {
                // Check if it's a number (integer or decimal)
                if (!isNaN(e) && e.trim() !== '') {
                    // Check if it's an integer
                    if (e.includes('.')) {
                        return parseFloat(e);
                    } else {
                        return parseInt(e);
                    }
                }
                return e;
            });
            
            return new Set(parsedElements);
        }

        // Drawing functions for exercises
        function drawExercise139() {
            const trace = {
                x: [1, 1, 2, 2, 1],
                y: [1, 2, 2, 1, 1],
                mode: 'lines',
                type: 'scatter',
                name: '{(x, y): x∈[1,2], y∈[1,2]}',
                fill: 'toself',
                fillcolor: 'rgba(52, 152, 219, 0.3)',
                line: { color: 'blue', width: 2 }
            };
            
            const layout = {
                title: 'Exercise 1.1D.39: Square [1,2] × [1,2]',
                xaxis: { title: 'x', range: [0, 3] },
                yaxis: { title: 'y', range: [0, 3] },
                showlegend: true
            };
            
            Plotly.newPlot('graph-1-1-39', [trace], layout);
        }

        function drawExercise140() {
            const trace = {
                x: [0, 0, 1, 1, 0],
                y: [1, 2, 2, 1, 1],
                mode: 'lines',
                type: 'scatter',
                name: '{(x, y): x∈[0,1], y∈[1,2]}',
                fill: 'toself',
                fillcolor: 'rgba(52, 152, 219, 0.3)',
                line: { color: 'blue', width: 2 }
            };
            
            const layout = {
                title: 'Exercise 1.1D.40: Rectangle [0,1] × [1,2]',
                xaxis: { title: 'x', range: [-0.5, 1.5] },
                yaxis: { title: 'y', range: [0, 3] },
                showlegend: true
            };
            
            Plotly.newPlot('graph-1-1-40', [trace], layout);
        }

        function drawExercise129() {
            const trace = {
                x: [1, 1, 1, 2, 2, 2, 3, 3, 3],
                y: [-1, 0, 1, -1, 0, 1, -1, 0, 1],
                mode: 'markers',
                type: 'scatter',
                name: '{1,2,3} × {-1,0,1}',
                marker: { size: 10, color: 'red' }
            };
            
            const layout = {
                title: 'Exercise 1.2B.9: {1,2,3} × {-1,0,1}',
                xaxis: { title: 'x', range: [0, 4] },
                yaxis: { title: 'y', range: [-2, 2] },
                showlegend: true
            };
            
            Plotly.newPlot('graph-1-2-9', [trace], layout);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize progress
            updateProgress();
            
            // Set up event listeners for dynamic elements
            document.getElementById('powerSetRange').addEventListener('input', function() {
                document.getElementById('powerSetValue').textContent = this.value;
            });
            
            document.getElementById('alphaRange').addEventListener('input', function() {
                document.getElementById('alphaValue').textContent = parseFloat(this.value).toFixed(1);
            });
            
            // Set up file import
            document.getElementById('import-file').addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedSubmissions = JSON.parse(e.target.result);
                        submissions = { ...submissions, ...importedSubmissions };
                        localStorage.setItem('setsTheorySubmissions', JSON.stringify(submissions));
                        updateProgress();
                        alert('Submissions imported successfully!');
                    } catch (error) {
                        alert('Error importing submissions. Please make sure the file is valid JSON.');
                    }
                };
                reader.readAsText(file);
                
                // Reset the file input
                event.target.value = '';
            });
            
            // Set first section as active
            showSection('intro');
            
            // Initialize MathJax
            if (window.MathJax) {
                MathJax.typeset();
            }
        });
    </script>
</body>
</html>
